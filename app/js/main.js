(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var schemaBuilder = lf.schema.create('jeopardy', 1)

// Our categories
schemaBuilder.createTable('categories')
  .addColumn('id', lf.Type.INTEGER)
  .addColumn('name', lf.Type.STRING)
  .addPrimaryKey(['id'], true)

//schemaBuilder.createTable('questions')
//  .addColumn('id', lf.Type.INTEGER)
//  .addColumn('value', lf.Type.INTEGER)
//  .addColumn('text', lf.Type.STRING)
//  .addColumn('correct', lf.Type.STRING)
//  .addPrimaryKey(['id'], true)

//schemaBuilder.createTable('questions_to_categories')
//  .addColumn('id', lf.Type.INTEGER)
//  .addColumn('cat_id', lf.Type.INTEGER)
//  .addColumn('que_id', lf.Type.INTEGER)
//  .addPrimaryKey(['id'], true)

var jeopardyDb
var category
var question

schemaBuilder.connect().then(function (db) {
  jeopardyDb = db
  category = db.getSchema().table('categories')

  var row1 = category.createRow({
    'name': 'Addition'
  })
  var row2 = category.createRow({
    'name': 'Subtraction'
  })
  var row3 = category.createRow({
    'name': 'Multiplication'
  })
  var row4 = category.createRow({
    'name': 'Division'
  })

  return db.insertOrReplace().into(category).values([row1, row2, row3, row4]).exec()
}).then(function () {
  return jeopardyDb.select().from(category).exec()
}).then(function (results) {
  results.forEach(function (row) {
    console.log(row['id'], row['name'])
  })
})

schemaBuilder.connect().then(function (db) {
})



},{}],2:[function(require,module,exports){
'use strict'

require('lovefield')
require('./database.js')

class Card {
  constructor(category, number) {
    this.category = category
    this.number = number
    this.question = ""
    this.answers = []
  }
}

class Category {
  constructor(categoryName, categoryNumber) {
    this.name = categoryName
    this.number = categoryNumber
    this.questions = []
  }
}

var cards = document.querySelectorAll('.card')

for (var i = 0; i < cards.length; i++) {
  cards[i].addEventListener('click', function (event) {
    this.classList.toggle('correct', 'incorrect')
  })
}


},{"./database.js":1,"lovefield":3}],3:[function(require,module,exports){
if(!self.window){window=self;}
(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,p=this;function q(a){return void 0!==a}function ca(){}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function fa(a){return null===a}function ga(a){return null!=a}function ha(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ia(a){return"string"==typeof a}function ja(a){return"function"==da(a)}function ka(a){return a[la]||(a[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;function na(a,b,c){return a.call.apply(a.bind,arguments)}
function oa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function pa(a,b,c){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa;return pa.apply(null,arguments)}
function qa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function r(a,b){var c=a.split("."),d=p;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&q(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function t(a,b){function c(){}c.prototype=b.prototype;a.jb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.$g=function(a,c,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function ra(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ra);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(ra,Error);ra.prototype.name="CustomError";var sa=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
function ta(a){var b=0,c=sa(String(ua)).split(".");a=sa(String(a)).split(".");for(var d=Math.max(c.length,a.length),e=0;0==b&&e<d;e++){var f=c[e]||"",h=a[e]||"",k=/(\d*)(\D*)/g,n=/(\d*)(\D*)/g;do{var B=k.exec(f)||["","",""],O=n.exec(h)||["","",""];if(0==B[0].length&&0==O[0].length)break;b=va(0==B[1].length?0:parseInt(B[1],10),0==O[1].length?0:parseInt(O[1],10))||va(0==B[2].length,0==O[2].length)||va(B[2],O[2])}while(0==b)}return b}function va(a,b){return a<b?-1:a>b?1:0};function wa(a,b,c){this.sg=c;this.Sf=a;this.Ng=b;this.ud=0;this.kd=null}wa.prototype.get=function(){var a;0<this.ud?(this.ud--,a=this.kd,this.kd=a.next,a.next=null):a=this.Sf();return a};wa.prototype.put=function(a){this.Ng(a);this.ud<this.sg&&(this.ud++,a.next=this.kd,this.kd=a)};var xa=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ia(a))return ia(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},ya=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},za=Array.prototype.map?function(a,b,c){return Array.prototype.map.call(a,
b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=ia(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Aa=Array.prototype.reduce?function(a,b,c,d){d&&(b=pa(b,d));return Array.prototype.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;ya(a,function(c,h){e=b.call(d,e,c,h,a)});return e},Ba=Array.prototype.some?function(a,b,c){return Array.prototype.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};
function Ca(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function Da(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ea(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==da(d))for(var e=0;e<d.length;e+=8192)for(var f=Ea.apply(null,Ca(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};function Fa(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b};var Ga;a:{var Ha=p.navigator;if(Ha){var Ia=Ha.userAgent;if(Ia){Ga=Ia;break a}}Ga=""}function u(a){return-1!=Ga.indexOf(a)};function Ja(){return u("Opera")||u("OPR")}function Ka(){return(u("Chrome")||u("CriOS"))&&!Ja()&&!u("Edge")};function La(a){p.setTimeout(function(){throw a;},0)}var Na;
function Oa(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!u("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=pa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!u("Trident")&&!u("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var a=c.Ie;c.Ie=null;a()}};return function(a){d.next={Ie:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){p.setTimeout(a,0)}};function Pa(){this.Ed=this.tc=null}var Ra=new wa(function(){return new Qa},function(a){a.reset()},100);Pa.prototype.add=function(a,b){var c=Ra.get();c.set(a,b);this.Ed?this.Ed.next=c:this.tc=c;this.Ed=c};Pa.prototype.remove=function(){var a=null;this.tc&&(a=this.tc,this.tc=this.tc.next,this.tc||(this.Ed=null),a.next=null);return a};function Qa(){this.next=this.scope=this.Wd=null}Qa.prototype.set=function(a,b){this.Wd=a;this.scope=b;this.next=null};
Qa.prototype.reset=function(){this.next=this.scope=this.Wd=null};function Sa(a,b){Ta||Ua();Va||(Ta(),Va=!0);Wa.add(a,b)}var Ta;function Ua(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);Ta=function(){a.then(Xa)}}else Ta=function(){var a=Xa;!ja(p.setImmediate)||p.Window&&p.Window.prototype&&!u("Edge")&&p.Window.prototype.setImmediate==p.setImmediate?(Na||(Na=Oa()),Na(a)):p.setImmediate(a)}}var Va=!1,Wa=new Pa;function Xa(){for(var a=null;a=Wa.remove();){try{a.Wd.call(a.scope)}catch(b){La(b)}Ra.put(a)}Va=!1};function v(a,b){this.Ua=0;this.rf=void 0;this.Zc=this.hc=this.H=null;this.jd=this.Ud=!1;if(a!=ca)try{var c=this;a.call(b,function(a){Ya(c,2,a)},function(a){Ya(c,3,a)})}catch(d){Ya(this,3,d)}}function Za(){this.next=this.context=this.nc=this.Mc=this.child=null;this.Hd=!1}Za.prototype.reset=function(){this.context=this.nc=this.Mc=this.child=null;this.Hd=!1};var $a=new wa(function(){return new Za},function(a){a.reset()},100);function ab(a,b,c){var d=$a.get();d.Mc=a;d.nc=b;d.context=c;return d}
function w(a){if(a instanceof v)return a;var b=new v(ca);Ya(b,2,a);return b}function bb(a){return new v(function(b,c){c(a)})}function cb(a,b,c){db(a,b,c,null)||Sa(qa(b,a))}function eb(a){return new v(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,n;k<a.length;k++)n=a[k],cb(n,qa(f,k),h);else b(e)})}function fb(){var a,b,c=new v(function(c,e){a=c;b=e});return new gb(c,a,b)}
v.prototype.then=function(a,b,c){return hb(this,ja(a)?a:null,ja(b)?b:null,c)};v.prototype.then=v.prototype.then;v.prototype.$goog_Thenable=!0;v.prototype.xe=function(a,b){return hb(this,null,a,b)};function ib(a,b){a.hc||2!=a.Ua&&3!=a.Ua||jb(a);a.Zc?a.Zc.next=b:a.hc=b;a.Zc=b}
function hb(a,b,c,d){var e=ab(null,null,null);e.child=new v(function(a,h){e.Mc=b?function(c){try{var e=b.call(d,c);a(e)}catch(B){h(B)}}:a;e.nc=c?function(b){try{var e=c.call(d,b);!q(e)&&b instanceof kb?h(b):a(e)}catch(B){h(B)}}:h});e.child.H=a;ib(a,e);return e.child}v.prototype.Tg=function(a){this.Ua=0;Ya(this,2,a)};v.prototype.Ug=function(a){this.Ua=0;Ya(this,3,a)};
function Ya(a,b,c){0==a.Ua&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ua=1,db(c,a.Tg,a.Ug,a)||(a.rf=c,a.Ua=b,a.H=null,jb(a),3!=b||c instanceof kb||lb(a,c)))}function db(a,b,c,d){if(a instanceof v)return ib(a,ab(b||ca,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ja(f))return mb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function mb(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(n){f(n)}}function jb(a){a.Ud||(a.Ud=!0,Sa(a.Zf,a))}function nb(a){var b=null;a.hc&&(b=a.hc,a.hc=b.next,b.next=null);a.hc||(a.Zc=null);return b}
v.prototype.Zf=function(){for(var a=null;a=nb(this);){var b=this.Ua,c=this.rf;if(3==b&&a.nc&&!a.Hd)for(var d=void 0,d=this;d&&d.jd;d=d.H)d.jd=!1;if(a.child)a.child.H=null,ob(a,b,c);else try{a.Hd?a.Mc.call(a.context):ob(a,b,c)}catch(e){pb.call(null,e)}$a.put(a)}this.Ud=!1};function ob(a,b,c){2==b?a.Mc.call(a.context,c):a.nc&&a.nc.call(a.context,c)}function lb(a,b){a.jd=!0;Sa(function(){a.jd&&pb.call(null,b)})}var pb=La;function kb(a){ra.call(this,a)}t(kb,ra);kb.prototype.name="cancel";
function gb(a,b,c){this.ga=a;this.resolve=b;this.reject=c};function qb(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var n=0;n<f+1;n++)h[0][n]=0;for(k=1;k<=e;k++)for(n=1;n<=f;n++)c(a[k-1],b[n-1])?h[k][n]=h[k-1][n-1]+1:h[k][n]=Math.max(h[k-1][n],h[k][n-1]);for(var B=[],k=e,n=f;0<k&&0<n;)c(a[k-1],b[n-1])?(B.unshift(d(k-1,n-1)),k--,n--):h[k-1][n]>h[k][n-1]?k--:n--;return B}function rb(a){return Aa(arguments,function(a,c){return a+c},0)}
function sb(a){return rb.apply(null,arguments)/arguments.length}function tb(a){var b=arguments.length;if(2>b)return 0;var c=sb.apply(null,arguments);return rb.apply(null,za(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function ub(a){return Math.sqrt(tb.apply(null,arguments))};var vb="StopIteration"in p?p.StopIteration:{message:"StopIteration",stack:""};function wb(){}wb.prototype.next=function(){throw vb;};wb.prototype.uc=function(){return this};function xb(a){if(a instanceof wb)return a;if("function"==typeof a.uc)return a.uc(!1);if(ha(a)){var b=0,c=new wb;c.next=function(){for(;;){if(b>=a.length)throw vb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function yb(a,b){if(ha(a))try{ya(a,b,void 0)}catch(c){if(c!==vb)throw c;}else{a=xb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==vb)throw c;}}}function zb(a){if(Ba(arguments,function(a){return!a.length})||!arguments.length)return new wb;var b=new wb,c=arguments,d=Da(c.length);b.next=function(){if(d){for(var a=za(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw vb;};return b};function Ab(a,b){this.o={};this.b=[];this.Va=this.Ib=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)}m=Ab.prototype;m.Ec=g("Ib");m.ta=function(){Db(this);for(var a=[],b=0;b<this.b.length;b++)a.push(this.o[this.b[b]]);return a};function Eb(a){Db(a);return a.b.concat()}m.Qa=function(a){return Fb(this.o,a)};m.nd=function(){return 0==this.Ib};
m.clear=function(){this.o={};this.Va=this.Ib=this.b.length=0};m.remove=function(a){return Fb(this.o,a)?(delete this.o[a],this.Ib--,this.Va++,this.b.length>2*this.Ib&&Db(this),!0):!1};function Db(a){if(a.Ib!=a.b.length){for(var b=0,c=0;b<a.b.length;){var d=a.b[b];Fb(a.o,d)&&(a.b[c++]=d);b++}a.b.length=c}if(a.Ib!=a.b.length){for(var e={},c=b=0;b<a.b.length;)d=a.b[b],Fb(e,d)||(a.b[c++]=d,e[d]=1),b++;a.b.length=c}}m.get=function(a,b){return Fb(this.o,a)?this.o[a]:b};
m.set=function(a,b){Fb(this.o,a)||(this.Ib++,this.b.push(a),this.Va++);this.o[a]=b};m.addAll=function(a){var b;if(a instanceof Ab)b=Eb(a),a=a.ta();else{b=[];var c=0,d;for(d in a)b[c++]=d;a=Fa(a)}for(c=0;c<b.length;c++)this.set(b[c],a[c])};m.forEach=function(a,b){for(var c=Eb(this),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};m.clone=function(){return new Ab(this)};
m.uc=function(a){Db(this);var b=0,c=this.Va,d=this,e=new wb;e.next=function(){if(c!=d.Va)throw Error("The map has changed since the iterator was created");if(b>=d.b.length)throw vb;var e=d.b[b++];return a?e:d.o[e]};return e};function Fb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Gb(){return u("iPhone")&&!u("iPod")&&!u("iPad")};var Hb=Ja(),Ib=u("Trident")||u("MSIE"),Jb=u("Edge"),Kb=u("Gecko")&&!(-1!=Ga.toLowerCase().indexOf("webkit")&&!u("Edge"))&&!(u("Trident")||u("MSIE"))&&!u("Edge"),Lb=-1!=Ga.toLowerCase().indexOf("webkit")&&!u("Edge");function Mb(){var a=Ga;if(Kb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Jb)return/Edge\/([\d\.]+)/.exec(a);if(Ib)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Lb)return/WebKit\/(\S+)/.exec(a)}
var ua=function(){if(Hb&&p.opera){var a;var b=p.opera.version;try{a=b()}catch(c){a=b}return a}a="";(b=Mb())&&(a=b?b[1]:"");return Ib&&(b=(b=p.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a}(),Nb={};var Ob=Gb()||u("iPod"),Pb=u("iPad"),Qb=Ka(),Rb=u("Safari")&&!(Ka()||u("Coast")||Ja()||u("Edge")||u("Silk")||u("Android"))&&!(Gb()||u("iPad")||u("iPod"));/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Sb(){this.re=Rb||Pb||Ob;this.ig=!(this.re||Ib&&!Nb[10]&&!(Nb[10]=0<=ta(10)));!Ib||Nb[11]||(Nb[11]=0<=ta(11));this.Yg=Qb||Rb;this.xg=q(window.Map)&&q(window.Map.prototype.values)&&q(window.Map.prototype.forEach)&&!this.re;this.yg=q(window.Set)&&q(window.Set.prototype.values)&&q(window.Set.prototype.forEach)&&!this.re}var Tb;function Ub(){q(Tb)||(Tb=new Sb);return Tb};function x(){this.o=new Ab;Object.defineProperty(this,"size",{get:function(){return this.o.Ec()}})}x.prototype.clear=function(){this.o.clear()};x.prototype.clear=x.prototype.clear;x.prototype.delete=function(a){return this.o.remove(a)};x.prototype["delete"]=x.prototype.delete;x.prototype.forEach=function(a,b){return this.o.forEach(a,b)};x.prototype.forEach=x.prototype.forEach;x.prototype.get=function(a){return this.o.get(a)};x.prototype.get=x.prototype.get;x.prototype.has=function(a){return this.o.Qa(a)};
x.prototype.has=x.prototype.has;x.prototype.set=function(a,b){return this.o.set(a,b)};x.prototype.set=x.prototype.set;var Vb=Ub().xg;function y(){return Vb?new window.Map:new x}function Wb(a){if(a instanceof x)return Eb(a.o);var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function z(a){if(a instanceof x)return a.o.ta();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Xb(a,b){this.ua=a;this.s=b||this.Ne()}var Yb=0;m=Xb.prototype;m.id=g("ua");m.Ne=function(){return{}};m.zf=g("s");m.La=function(){return{id:this.ua,value:this.zf()}};m.rb=function(a){return"#"==a.substr(-1)?this.ua:null};function Zb(a){return new Xb(a.id,a.value)}function $b(a){return new Xb(Yb++,a||{})}function ac(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};var bc={};r("lf.TransactionType",bc);bc.READ_ONLY=0;bc.READ_WRITE=1;function A(a,b,c,d,e){this.zd=a;this.mg=b;this.Wg=c;this.Uf=d;this.Mf=e}r("lf.TransactionStats",A);A.prototype.Rg=g("zd");A.prototype.success=A.prototype.Rg;A.prototype.lg=g("mg");A.prototype.insertedRowCount=A.prototype.lg;A.prototype.Vg=g("Wg");A.prototype.updatedRowCount=A.prototype.Vg;A.prototype.Tf=g("Uf");A.prototype.deletedRowCount=A.prototype.Tf;A.prototype.Lf=g("Mf");A.prototype.changedTableCount=A.prototype.Lf;function cc(a,b){this.Bd=a;this.Sa=b||null;this.U=fb();this.zd=!1;this.Ba=null}cc.prototype.ma=function(){return(0==this.Bd?this.xc():dc(this)).then(function(a){this.zd=!0;return a}.bind(this))};function dc(a){try{fc(a.Sa)}catch(b){return bb(b)}return gc(a).then(function(a){this.Sa.ma();return a}.bind(a))}function gc(a){hc(a);ic(a);return a.xc()}
function hc(a){a.Sa.kb.forEach(function(a,c){var d=this.Sa.fa().get(c),d=this.K(d.getName(),d.ob.bind(d),0),e=z(a.za).map(function(a){return a.id()});0<e.length&&d.remove(e).xe(this.Ve,this);e=z(a.oa).map(function(a){return a[1]}).concat(z(a.ya));d.put(e).xe(this.Ve,this)},a)}function ic(a){jc(a.Sa).forEach(function(a){var c=this.K(a.getName(),Zb,1);c.remove([]);c.put(a.La())},a)}cc.prototype.Ve=function(a){this.U.reject(a)};
cc.prototype.ca=function(){if(null===this.Ba)if(this.zd)if(0==this.Bd)this.Ba=new A(!0,0,0,0,0);else{var a=0,b=0,c=0,d=0;this.Sa.kb.forEach(function(e){d++;a+=e.ya.size;c+=e.oa.size;b+=e.za.size});this.Ba=new A(!0,a,c,b,d)}else this.Ba=new A(!1,0,0,0,0);return this.Ba};function kc(a){this.Og=a}kc.prototype.toString=g("Og");var lc=new kc("backstore"),mc=new kc("cache"),nc=new kc("indexstore"),oc=new kc("engine"),pc=new kc("runner"),qc=new kc("observerregistry"),rc=new kc("schema");function sc(a){if(a.ta&&"function"==typeof a.ta)return a.ta();if(ia(a))return a.split("");if(ha(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Fa(a)};function tc(a){this.o=new Ab;a&&this.addAll(a)}function uc(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+ka(a):b.substr(0,1)+a}m=tc.prototype;m.Ec=function(){return this.o.Ec()};m.add=function(a){this.o.set(uc(a),a)};m.addAll=function(a){a=sc(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};m.remove=function(a){return this.o.remove(uc(a))};m.clear=function(){this.o.clear()};m.nd=function(){return this.o.nd()};m.contains=function(a){return this.o.Qa(uc(a))};m.ta=function(){return this.o.ta()};
m.clone=function(){return new tc(this)};m.uc=function(){return this.o.uc(!1)};function vc(a){this.ac=new tc(a);Object.defineProperty(this,"size",{get:function(){return this.ac.Ec()}})}vc.prototype.add=function(a){this.ac.add(a)};vc.prototype.add=vc.prototype.add;vc.prototype.clear=function(){this.ac.clear()};vc.prototype.clear=vc.prototype.clear;vc.prototype.delete=function(a){return this.ac.remove(a)};vc.prototype["delete"]=vc.prototype.delete;vc.prototype.forEach=function(a,b){this.ac.ta().forEach(a,b)};vc.prototype.has=function(a){return this.ac.contains(a)};
vc.prototype.has=vc.prototype.has;var wc=Ub().yg;function C(a){return wc?q(a)?new window.Set(a):new window.Set:new vc(a)}function D(a){if(a instanceof vc)return a.ac.ta();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function xc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function yc(a,b){this.ua=a;this.s=b||{}}function zc(a){var b=C();a.forEach(function(a){b.add(a>>9)});return D(b)}yc.prototype.aa=g("ua");function Ac(a,b){b.forEach(function(a){this.s[a.id()]=a.La()},a)}function Bc(a,b){b.forEach(function(a){delete this.s[a]},a)}yc.prototype.La=function(){return{id:this.ua,value:JSON.stringify(this.s)}};function Cc(a){return new yc(a.id,JSON.parse(a.value))};function Dc(a,b,c){this.Z=a;this.Kb=b;this.sf=c}m=Dc.prototype;m.get=function(a){if(0==a.length)return this.Xd();var b=this.Kb;return Ec(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.s[a])})})};function Ec(a,b){var c=y(),d=fb(),e=zc(b).map(function(a){return new v(function(b,d){var e;try{e=this.Z.get(a)}catch(B){d(B);return}e.onerror=d;e.onsuccess=function(a){a=Cc(a.target.result);c.set(a.aa(),a);b()}},this)},a);eb(e).then(function(){d.resolve(c)});return d.ga}
m.Xd=function(){return new v(function(a,b){var c=[],d;try{d=this.Z.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f;f=Cc(b.value).s;for(var h in f)c.push(this.Kb(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Xb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return w();var b=y();a.forEach(function(a){var d;d=a.id()>>9;var e=b.get(d)||null;null===e&&(e=this.sf(this.Z.name,d));Ac(e,[a]);b.set(d,e)},this);a=z(b).map(function(a){return this.Xb(function(){return this.Z.put(a.La())}.bind(this))},this);return eb(a)};
m.remove=function(a){if(0==a.length)return this.Xb(function(){return this.Z.clear()}.bind(this));var b=y();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.sf(this.Z.name,d));Bc(e,[a]);b.set(d,e)},this);a=z(b).map(function(a){return this.Xb(function(){return 0==Object.keys(a.s).length?this.Z.delete(a.aa()):this.Z.put(a.La())}.bind(this))},this);return eb(a)};function Fc(a,b,c){a=a.f(mc);var d=[c<<9,(c+1<<9)-1];b=a.Wa(b,d[0],d[1]);c=new yc(c);Ac(c,b);return c}
function Gc(a,b){return new yc(b)};function Hc(a){this.W=a.f(mc);this.G=a.f(nc);this.i=a.f(rc)}Hc.prototype.update=function(a){a.forEach(function(a){Ic(this,a);Jc(this,a)},this)};function Jc(a,b){var c=b.getName();b.za.forEach(function(a,b){this.W.remove(c,b)},a);b.ya.forEach(function(a){this.W.set(c,a)},a);b.oa.forEach(function(a){this.W.set(c,a[1])},a)}function Ic(a,b){var c=a.i.table(b.getName());Kc(b).forEach(function(a){Lc(this,c,a)},a)}
function Lc(a,b,c){var d=a.G.qc.get(b.getName())||[],e=0;d.forEach(function(a){try{Mc(a,c),e++}catch(b){throw d.slice(0,e).forEach(function(a){Mc(a,[c[1],c[0]])},this),b;}},a)}function Mc(a,b){var c=null===b[1]?void 0:b[1].rb(a.getName()),d=null===b[0]?void 0:b[0].rb(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.nb().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var Nc={};r("lf.ConstraintAction",Nc);Nc.RESTRICT=0;Nc.CASCADE=1;var Oc={};r("lf.ConstraintTiming",Oc);Oc.IMMEDIATE=0;Oc.DEFERRABLE=1;var Pc={};r("lf.Order",Pc);Pc.DESC=0;Pc.ASC=1;var Qc={};r("lf.Type",Qc);Qc.ARRAY_BUFFER=0;Qc.BOOLEAN=1;Qc.DATE_TIME=2;Qc.INTEGER=3;Qc.NUMBER=4;Qc.STRING=5;Qc.OBJECT=6;var Rc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};r("lf.type.DEFAULT_VALUES",Rc);function E(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(arguments[c].toString().slice(0,64))}t(E,Error);function Sc(){this.o=y();this.size=0}m=Sc.prototype;m.has=function(a){return this.o.has(a)};m.set=function(a,b){var c=this.o.get(a)||null;null===c&&(c=C(),this.o.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.$b=function(a,b){var c=this.o.get(a)||null;null===c&&(c=C(),this.o.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};m.de=function(a){a.keys().forEach(function(b){var c=a.get(b);this.$b(b,c)},this);return this};
m.delete=function(a,b){var c=this.o.get(a)||null;if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.o.delete(a));return d};m.get=function(a){a=this.o.get(a)||null;return null===a?null:D(a)};m.clear=function(){this.o.clear();this.size=0};m.keys=function(){return Wb(this.o)};m.values=function(){var a=[];this.o.forEach(function(b){a.push.apply(a,D(b))});return a};function Tc(a){this.G=a.f(nc);this.i=a.f(rc);this.W=a.f(mc);this.cd=null}function Vc(a,b,c){var d=b.Lb().Ag;c.forEach(function(a){d.forEach(function(b){if(null==a.s[b.getName()])throw new E(202,b.m());},this)},a)}function Wc(a,b,c,d){b.Lb().Yd().forEach(function(a){a.timing==d&&Xc(this,a,c)},a)}function Xc(a,b,c){var d=Yc(a,b);c.forEach(function(a){if(Zc(a[0],a[1],b.name)&&(a=a[1].rb(b.name),null!==a&&!d.Qa(a)))throw new E(203,b.name);},a)}
function Yc(a,b){null===a.cd&&(a.cd=y());var c=a.cd.get(b.name)||null;null===c&&(c=a.i.table(b.Ya)[b.Nc].Ea(),c=a.G.get(c.m()),a.cd.set(b.name,c));return c}function Zc(a,b,c){return(null===a?null!==b:null===b)||a.rb(c)!=b.rb(c)}function $c(a,b,c,d){b=ad(a.i.info(),b.getName(),0);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&bd(a,b,c,function(a,b,c){if(b.Qa(c))throw new E(203,a.name);}))}
function cd(a,b,c){b=ad(a.i.info(),b.getName(),1);if(null===b)return null;var d=new Sc;bd(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.$b(a.Je,b)});return d}function dd(a,b,c){var d=new Sc;bd(a,c,b,function(a,b,c,k){b.get(c).forEach(function(b){d.set(b,{Vd:a,Fg:k[1]})})});return d}function bd(a,b,c,d){b.forEach(function(a){var b=this.G.get(a.name),h=Yc(this,a);c.forEach(function(c){if(Zc(c[0],c[1],h.getName())){var n=c[0].rb(h.getName());d(a,b,n,c)}},this)},a)}
function ed(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Wc(a,b,c,d))}function fd(a,b,c,d){0!=c.length&&(Wc(a,b,c,d),$c(a,b,c,d))}function gd(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),$c(a,b,c,d))}
function hd(a,b,c){var d={we:[],uf:new Sc},e=new Sc;e.$b(b.getName(),c.map(function(a){return a.id()}));do{var f=new Sc;e.keys().forEach(function(a){var b=this.i.table(a);a=e.get(a).map(function(a){return[this.W.get(a),null]},this);b=cd(this,b,a);null!==b&&(d.we.unshift.apply(d.we,b.keys()),f.de(b))},a);e=f;d.uf.de(e)}while(0<e.size);return d};function id(a){this.ya=y();this.oa=y();this.za=y();this.C=a}m=id.prototype;m.getName=g("C");m.add=function(a){if(this.za.has(a.id())){var b=[this.za.get(a.id()),a];this.oa.set(a.id(),b);this.za.delete(a.id())}else this.ya.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.ya.has(c)?this.ya.set(c,b):(this.oa.has(c)&&(a=[this.oa.get(a[0].id())[0],b]),this.oa.set(c,a))};
m.delete=function(a){if(this.ya.has(a.id()))this.ya.delete(a.id());else if(this.oa.has(a.id())){var b=this.oa.get(a.id())[0];this.oa.delete(a.id());this.za.set(a.id(),b)}else this.za.set(a.id(),a)};m.de=function(a){a.ya.forEach(function(a){this.add(a)},this);a.oa.forEach(function(a){this.modify(a)},this);a.za.forEach(function(a){this.delete(a)},this)};
function Kc(a){var b=[];a.ya.forEach(function(a){b.push([null,a])});a.oa.forEach(function(a){b.push(a)});a.za.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+Wb(this.ya).toString()+"], ["+Wb(this.oa).toString()+"], ["+Wb(this.za).toString()+"]"};function jd(a){var b=new id(a.C);a.ya.forEach(function(a){b.delete(a)});a.za.forEach(function(a){b.add(a)});a.oa.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.nd=function(){return 0==this.ya.size&&0==this.za.size&&0==this.oa.size};function kd(a,b){this.ba=y();b.forEach(function(a){this.ba.set(a.getName(),a)},this);this.i=a.f(rc);this.W=a.f(mc);this.G=a.f(nc);this.Ca=new Tc(a);this.ld=new Hc(a);this.kb=y()}function jc(a){var b=[];Wb(a.kb).map(function(a){return this.ba.get(a)},a).forEach(function(a){a.Hb()&&(a.Fa().forEach(function(a){b.push(this.G.get(a.m()))},this),b.push(this.G.get(a.getName()+".#")))},a);return b}m=kd.prototype;m.fa=g("ba");
m.Eb=function(a,b){ld(this,a);Vc(this.Ca,a,b);ed(this.Ca,a,b,0);for(var c=0;c<b.length;c++)md(this,a,[null,b[c]])};function md(a,b,c){var d=b.getName(),e=a.kb.get(d)||new id(d);a.kb.set(d,e);try{Lc(a.ld,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.W.set(d,f),e.add(f)):null!==b&&null!==f?(a.W.set(d,f),e.modify(c)):null!==b&&null===f&&(a.W.remove(d,b.id()),e.delete(b))}
m.update=function(a,b){ld(this,a);Vc(this.Ca,a,b);var c=b.map(function(a){return[this.W.get(a.id()),a]},this);nd(this,a,c);fd(this.Ca,a,c,0);c.forEach(function(b){md(this,a,b)},this)};m.Zd=function(a,b){ld(this,a);Vc(this.Ca,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=a.Lb().fd();if(null===h)f=null;else{f=this.Ca;var h=h.m(),k=d.rb(h);f=f.G.get(h).get(k);f=0==f.length?null:f[0]}null!=f?(e=this.W.get(f),d.ua=f,fd(this.Ca,a,[[e,d]],0)):ed(this.Ca,a,[d],0);md(this,a,[e,d])}};
m.remove=function(a,b){ld(this,a);od(this,a,b);gd(this.Ca,a,b,0);for(var c=0;c<b.length;c++)md(this,a,[b[c],null])};function nd(a,b,c){b=ad(a.i.info(),b.getName(),1);if(null!==b){var d=dd(a.Ca,c,b);d.keys().forEach(function(a){d.get(a).forEach(function(b){var c=this.i.table(b.Vd.Je),d=this.W.get(a),n=c.ob(d.La());n.s[b.Vd.zb]=b.Fg.s[b.Vd.Nc];md(this,c,[d,n])},this)},a)}}
function od(a,b,c){if(null!==ad(a.i.info(),b.getName(),1)){b=hd(a.Ca,b,c);var d=b.uf;b.we.forEach(function(a){var b=this.i.table(a);a=d.get(a).map(function(a){return this.W.get(a)},this);gd(this.Ca,b,a,0);a.forEach(function(a){md(this,b,[a,null])},this)},a)}}function fc(a){a.kb.forEach(function(a){var c=this.ba.get(a.getName());ed(this.Ca,c,z(a.ya),1);gd(this.Ca,c,z(a.za),1);fd(this.Ca,c,z(a.oa),1)},a)}m.ma=aa();m.Ob=function(){var a=z(this.kb).map(function(a){return jd(a)});this.ld.update(a)};
function ld(a,b){if(!a.ba.has(b.getName()))throw new E(106,b.getName());};function F(a,b,c,d){this.c=a;this.u=b;this.ha=this.c==G?!1:c;this.qa=this.u==G?!1:d}var G=new (aa());F.prototype.toString=function(){return(this.ha?"(":"[")+(this.c==G?"unbound":this.c)+", "+(this.u==G?"unbound":this.u)+(this.qa?")":"]")};function pd(a){if(qd(a))return[];var b=null,c=null;a.c==G||(b=new F(G,a.c,!1,!a.ha));a.u==G||(c=new F(a.u,G,!a.qa,!1));return[b,c].filter(function(a){return null!==a})}F.prototype.reverse=function(){return new F(this.u,this.c,this.qa,this.ha)};
function rd(a,b){var c=sd(a.c,b.c,!0,a.ha,b.ha);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return d.u==G||d.u>c.c||d.u==c.c&&!d.qa&&!c.ha}function td(){return new F(G,G,!1,!1)}function qd(a){return a.c==G&&a.u==G}function ud(a){return a.c==a.u&&a.c!=G&&!a.ha&&!a.qa}F.prototype.contains=function(a){var b=this.u==G||a<this.u||a==this.u&&!this.qa;return(this.c==G||a>this.c||a==this.c&&!this.ha)&&b};
function sd(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==G?b==G?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==G?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function vd(a,b){var c=sd(a.c,b.c,!0,a.ha,b.ha);0==c&&(c=sd(a.u,b.u,!1,a.qa,b.qa));return c}function wd(a){if(0==a.length)return[];a.sort(vd);for(var b=Array(a.length+1),c=0;c<b.length;c++)b[c]=0==c?new F(G,a[c].c,!1,!0):c==b.length-1?new F(a[c-1].u,G,!0,!1):new F(a[c-1].u,a[c].c,!0,!0);return b};function xd(a){this.pc=[];q(a)&&this.add(a)}xd.prototype.toString=function(){return this.pc.map(function(a){return a.toString()}).join(",")};xd.prototype.Qa=function(a){return this.pc.some(function(b){return b.contains(a)})};xd.prototype.ta=g("pc");
xd.prototype.add=function(a){if(0!=a.length)if(a=this.pc.concat(a),1==a.length)this.pc=a;else{a.sort(vd);for(var b=[],c=a[0],d=1;d<a.length;++d)if(rd(c,a[d])){var e=a[d],f=td();if(c.c!=G&&e.c!=G){var h=sd(c.c,e.c,!0);1!=h?(f.c=c.c,f.ha=0!=h?c.ha:c.ha&&e.ha):(f.c=e.c,f.ha=e.ha)}c.u!=G&&e.u!=G&&(h=sd(c.u,e.u,!1),-1!=h?(f.u=c.u,f.qa=0!=h?c.qa:c.qa&&e.qa):(f.u=e.u,f.qa=e.qa));c=f}else b.push(c),c=a[d];b.push(c);this.pc=b}};
function yd(a,b){var c=[];a.ta().map(function(a){return b.ta().map(function(b){var c;if(rd(a,b)){c=td();var h=sd(a.c,b.c,!0),h=0==h?a.ha?a:b:-1!=h?a:b;c.c=h.c;c.ha=h.ha;a.u==G||b.u==G?b=a.u==G?b:a:(h=sd(a.u,b.u,!1),b=0==h?a.qa?a:b:-1==h?a:b);c.u=b.u;c.qa=b.qa}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new xd(c.filter(function(a){return null!==a}))};function H(a,b){this.entries=a;this.O=C(b);this.bb=null}H.prototype.w=function(){return D(this.O)};function zd(a){return a.entries.map(function(a){return a.xa.s})}function Ad(a){return a.entries.map(function(a){return a.xa.id()})}function Bd(a,b){return a.bb.get(b.m())}var Cd=null;function Dd(){null===Cd&&(Cd=new H([],[]));return Cd}
function Ed(a){if(0==a.length)return Dd();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=y();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=y(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new H(z(e),D(a[0].O))}function Fd(a){if(0==a.length)return Dd();var b=y();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new H(z(b),D(a[0].O))}
function Gd(a,b){var c=1<b.length,d=a.map(function(a){return new Hd(a,c)});return new H(d,b)}function Hd(a,b){this.xa=a;this.id=Id++;this.ae=b}var Id=0;function I(a,b){var c=b.cb();return null!==c&&a.xa.s.hasOwnProperty(c)?a.xa.s[c]:a.ae?a.xa.s[Jd(b.K())][b.getName()]:a.xa.s[b.getName()]}function Kd(a,b,c){var d=b.cb();if(null!=d)a.xa.s[d]=c;else if(a.ae){var d=Jd(b.K()),e=a.xa.s[d];null==e&&(e={},a.xa.s[d]=e);e[b.getName()]=c}else a.xa.s[b.getName()]=c}
function Ld(a,b,c,d){function e(a,b){if(a.ae){var c=a.xa.s,d;for(d in c)f[d]=c[d]}else f[b[0]]=a.xa.s}var f={};e(a,b);e(c,d);a=new Xb(-1,f);return new Hd(a,!0)};r("lf.bind",function(a){return new Md(a)});function Md(a){this.ia=a}r("lf.Binder",Md);Md.prototype.Ea=g("ia");function Nd(){this.af=Od();var a=Pd();this.kc=y();this.kc.set(1,Qd());this.kc.set(2,Rd());this.kc.set(4,a);this.kc.set(3,a);this.kc.set(5,Sd())}var Td;function Ud(){null!=Td||(Td=new Nd);return Td}function Vd(a,b,c){return(a.kc.get(b)||null).get(c)||null}function Od(){function a(a){return a}var b=y();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}
function Qd(){var a=y();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Pd(){var a=Qd();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Sd(){var a=Pd();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}
function Rd(){var a=y();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function J(){this.j=this.H=null}var Wd=[];J.prototype.getParent=g("H");J.prototype.eb=function(){for(var a=this;!fa(a.getParent());)a=a.getParent();return a};function Xd(a){for(var b=0;!fa(a.getParent());)b++,a=a.getParent();return b}function K(a){return a.j||Wd}function Yd(a,b){return K(a)[b]||null}function Zd(a,b,c){b.H=a;null===a.j?a.j=[b]:a.j.splice(c,0,b)}function L(a,b){b.H=a;null===a.j?a.j=[b]:a.j.push(b)}
function $d(a,b){var c=a.j&&a.j[b];return c?(c.H=null,a.j.splice(b,1),0==a.j.length&&(a.j=null),c):null}J.prototype.removeChild=function(a){return $d(this,K(this).indexOf(a))};function ae(a,b,c){Yd(a,c).H=null;b.H=a;a.j[c]=b}function be(a,b,c){!1!==b.call(c,a)&&K(a).forEach(function(a){be(a,b,c)})};function ce(){J.call(this);this.ua=de++}t(ce,J);var de=0;ce.prototype.aa=g("ua");function ee(a,b,c){ce.call(this);this.J=a;this.value=b;this.F=c;this.Ac=Vd(Ud(),this.J.L(),this.F);this.Xa=!1;this.gc=b}t(ee,ce);m=ee.prototype;m.Rb=function(){var a=new ee(this.J,this.value,this.F);a.gc=this.gc;a.yd(this.Xa);var b=this.aa();a.ua=b;return a};m.pb=function(a){return null!=a?(a.push(this.J),a):[this.J]};m.w=function(a){a=null!=a?a:C();a.add(this.J.K());return a};m.yd=ba("Xa");
function fe(a){var b=!1;a.value instanceof Md||(b="array"==da(a.value)?!a.value.some(function(a){return a instanceof Md}):!0);if(!b)throw new E(501);}m.eval=function(a){fe(this);if("in"==this.F)return ge(this,a);var b=a.entries.filter(function(a){return this.Ac(I(a,this.J),this.value)!=this.Xa},this);return new H(b,a.w())};
m.bind=function(a){if(this.gc instanceof Md){var b=this.gc.Ea();if(a.length<=b)throw new E(510);this.value=a[b]}else"array"==da(this.gc)&&(this.value=this.gc.map(function(b){if(b instanceof Md){var d=b.Ea();if(a.length<=d)throw new E(510);return a[b.Ea()]}return b}))};function ge(a,b){var c=C(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Xa}.bind(a),e=b.entries.filter(function(a){return d(I(a,this.J))},a);return new H(e,b.w())}
m.toString=function(){return"value_pred("+this.J.m()+" "+this.F+(this.Xa?"(complement)":"")+" "+this.value+")"};m.pd=function(){fe(this);return null!==this.value&&("between"==this.F||"in"==this.F||"eq"==this.F||"gt"==this.F||"gte"==this.F||"lt"==this.F||"lte"==this.F)};
m.ye=function(){var a=null;if("between"==this.F)a=new F(he(this,this.value[0]),he(this,this.value[1]),!1,!1);else{if("in"==this.F)return a=this.value.map(function(a){return new F(a,a,!1,!1)}),new xd(this.Xa?wd(a):a);a=he(this,this.value);a="eq"==this.F?new F(a,a,!1,!1):"gte"==this.F?new F(a,G,!1,!1):"gt"==this.F?new F(a,G,!0,!1):"lte"==this.F?new F(G,a,!1,!1):new F(G,a,!1,!0)}return new xd(this.Xa?pd(a):[a])};function he(a,b){return 2==a.J.L()?b.getTime():b};function ie(a){this.da=a;this.$c=this.Ia=null}function je(a,b){null===a.Ia&&null!=a.B&&(a.Ia=ke(a.B));return a.Ia.get(b)||null}function ke(a){var b=y();be(a,function(a){b.set(a.aa(),a)});return b}function le(a,b){b.B&&(a.B=b.B.Rb());a.$c=b}ie.prototype.bind=function(){return this};function me(a,b){var c=a.B;null!=c&&be(c,function(a){a instanceof ee&&a.bind(b)})};function oe(a){ie.call(this,a)}t(oe,ie);function pe(a){var b="";a.forEach(function(c,d){b+=c.J.m()+" ";b+=1==c.ub?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}oe.prototype.fa=function(){return C(this.c)};oe.prototype.clone=function(){var a=new oe(this.da);le(a,this);this.h&&(a.h=this.h.slice());this.c&&(a.c=this.c.slice());a.X=this.X;a.N=this.N;this.S&&(a.S=this.S.slice());this.na&&(a.na=this.na.slice());this.Wb&&(a.Wb=this.Wb);this.cc&&(a.cc=this.cc);a.Gb=this.Gb;return a};
oe.prototype.bind=function(a){oe.jb.bind.call(this,a);null!=this.Wb&&(this.X=a[this.Wb.Ea()]);null!=this.cc&&(this.N=a[this.cc.Ea()]);me(this,a);return this};function qe(a,b){this.Ja=a;this.ba=b}qe.prototype.eb=g("Ja");qe.prototype.fa=g("ba");function re(a){var b=C();a.forEach(function(a){a.fa().forEach(b.add.bind(b))});return b};function se(a,b){this.global=a;this.Pa=a.f(lc);this.wd=b.map(function(a){return a.context});this.lf=b.map(function(a){return a.le});this.Pd=re(this.lf);this.ze=te(this);this.hb=fb()}function te(a){return a.wd.some(function(a){return!(a instanceof oe)})?1:0}m=se.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.eb().exec(b,h).then(function(b){c.push(b[0]);return a()})}return w()}var b=0==this.ze?void 0:new kd(this.global,this.Pd),c=[],d=this.lf.slice(),e=this.wd;return a().then(function(){this.la=this.Pa.Jb(this.ze,D(this.Pd),b);return this.la.ma()}.bind(this)).then(function(){this.ie(c);return c}.bind(this),function(a){null!=b&&b.Ob();throw a;})};m.L=g("ze");m.fa=g("Pd");m.Sb=g("hb");m.aa=function(){return ka(this)};m.ie=aa();
m.ca=function(){var a=null;null!=this.la&&(a=this.la.ca());return null===a?new A(!1,0,0,0,0):a};function ue(a,b){se.call(this,a,b);this.Nb=a.f(qc)}t(ue,se);ue.prototype.getPriority=l(0);ue.prototype.ie=function(a){this.wd.forEach(function(b,c){ve(this.Nb,b,a[c])},this)};function we(a,b){this.g=a;this.Nb=a.f(qc);this.Ka=a.f(pc);this.ld=new Hc(a);this.kb=b;var c=a.f(rc),d=this.kb.map(function(a){return c.table(a.getName())});this.ba=C(d);this.hb=fb()}m=we.prototype;m.exec=function(){this.ld.update(this.kb);this.Qc();return w()};m.L=l(1);m.fa=g("ba");m.Sb=g("hb");m.aa=function(){return ka(this)};m.getPriority=l(1);m.Qc=function(){var a=xe(this.Nb,this.ba);0!=a.length&&(a=new ue(this.g,a),ye(this.Ka,a))};function ze(a){this.g=a;this.Pa=a.f(lc);this.Ka=a.f(pc)}ze.prototype.ge=function(a){a=new we(this.g,a);ye(this.Ka,a)};function M(a,b){this.Va=a;this.l=b;this.$a=y()}r("lf.backstore.FirebaseRawBackStore",M);M.prototype.gd=g("l");M.prototype.hd=function(){throw new E(351);};function Ae(a,b){var c=fb(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.ga}function Be(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=fb();c?a.set(b,d):a.update(b,d);return e.ga}
M.prototype.Ga=function(a){return Ae(this.l,"@rev/R").then(function(a){this.Ta=a;return Ae(this.l,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.$a.set(d,b[d]),b[d]>c&&(c=b[d]);a.ra().forEach(function(a){this.$a.has(a.getName())||(b[a.getName()]=++c)},this);d=this.l.child("@table");return Be(d,b)}.bind(this))};
function Ce(a,b,c){var d=a.$a.get(b);return null!=d?function(){var a={},b=fb();this.l.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.ga}.call(a).then(function(a){a["@rev"]={R:++this.Ta};return Be(this.l,a)}.bind(a)):w()}M.prototype.yc=function(a){return Ce(this,a,l(null)).then(function(){this.$a.delete(a);return Be(this.l.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.yc;
M.prototype.vc=function(a,b,c){return Ce(this,a,function(a){var e=a.P;e[b]=c;return{R:this.Ta+1,T:a.T,P:e}}.bind(this))};M.prototype.addTableColumn=M.prototype.vc;M.prototype.zc=function(a,b){return Ce(this,a,function(a){var d=a.P;delete d[b];return{R:this.Ta+1,T:a.T,P:d}}.bind(this))};M.prototype.dropTableColumn=M.prototype.zc;M.prototype.Pc=function(a,b,c){return Ce(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.Ta+1,T:a.T,P:e}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Pc;
M.prototype.Bb=function(){throw new E(351);};M.prototype.createRow=M.prototype.Bb;M.prototype.Hc=g("Va");M.prototype.getVersion=M.prototype.Hc;M.prototype.ic=function(a){var b=fb();a=this.$a.get(a);this.l.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.ga};M.prototype.dump=function(){var a={},b=Wb(this.$a).map(function(b){return this.ic(b).then(function(d){a[b]=d})}.bind(this));return eb(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function De(a,b,c){cc.call(this,b,c);this.l=a}t(De,cc);De.prototype.K=function(a){return this.l.Fc(a)};
De.prototype.xc=function(){if(0==this.Bd)return this.U.resolve(),this.U.ga;var a=this.Sa.kb;if(0==a.size)this.U.resolve();else{var b=this.l.Ta+1;this.l.Ta=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var f=this.l.$a.get(e);a.ya.forEach(function(a,d){c[d]={R:b,T:f,P:a.s}});a.oa.forEach(function(a,d){c[d]={R:b,T:f,P:a[1].s}});a.za.forEach(function(a,b){c[b]=null})},this);this.l.l.update(c,function(c){null===c?this.U.resolve():(this.l.Ta=b-1,c=z(a).map(function(a){return Ee(this.l,a.getName())},this),
eb(c).then(this.U.reject.bind(this.U),this.U.reject.bind(this.U)))}.bind(this))}return this.U.ga};function Fe(){this.Da=y()}function Ge(a,b){if(0==b.length)return z(a.Da);var c=[];b.forEach(function(a){a=this.Da.get(a)||null;null===a||c.push(a)},a);return c}Fe.prototype.getData=g("Da");Fe.prototype.get=function(a){return w(Ge(this,a))};function He(a,b){b.forEach(function(a){this.Da.set(a.id(),a)},a)}Fe.prototype.put=function(a){He(this,a);return w()};function Ie(a,b){0==b.length||b.length==a.Da.size?a.Da.clear():b.forEach(function(a){this.Da.delete(a)},a)}
Fe.prototype.remove=function(a){Ie(this,a);return w()};function Je(a){return 0==a.Da.size?0:Wb(a.Da).reduce(function(a,c){return a>c?a:c},0)};function Ke(a,b){this.i=a;this.Gf=b;this.Oc=y();this.Ta=-1;this.O=y();this.$a=y();this.Md=null}m=Ke.prototype;
m.Ga=function(a){this.l=this.Gf.child(this.i.name());var b=a||function(){return w()};return Ae(this.l,"@db/version").then(function(a){return null===a?Be(this.l,Le(this),!0).then(function(){var a=new M(0,this.l);return b(a)}.bind(this)).then(function(){return this.Ga()}.bind(this)):a==this.i.version()?Ae(this.l,"@rev/R").then(function(a){this.Ta=a;return Ae(this.l,"@table")}.bind(this)).then(function(a){for(var b in a)this.$a.set(b,a[b]);a=this.i.ra().map(function(a){return Ee(this,a.getName())},this);
return eb(a)}.bind(this)).then(function(){Me(this);Ne(this);return w()}.bind(this)):this.je(a,b).then(function(){return this.Ga()}.bind(this))}.bind(this))};m.je=function(a,b){var c=new M(a,this.l);return c.Ga(this.i).then(function(){return w()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.l.child("@db");return Be(a,{version:this.i.version()},!0)}.bind(this))};
function Ne(a){a.l.off();a.l.on("child_removed",a.Cg.bind(a));a.Nd&&(a.Nd.off(),a.Oc.clear());a.Nd=a.l.orderByChild("R").startAt(a.Ta+1);a.Nd.on("value",a.ge.bind(a))}function Me(a){Yb=z(a.O).map(function(a){return Je(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.Cg=function(a){var b=a.val(),c=this.Oc.get(b.T)||null;null===c&&(c=C(),this.Oc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.ge=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Ta&&(this.Ta=b,a=Oe(this,a),a.forEach(function(a){var b=this.O.get(a.getName()),e=Wb(a.za);0<e.length&&Ie(b,e);var f=z(a.ya);a.oa.forEach(function(a){f.push(a[1])});He(b,f)},this),0<a.length&&this.Kc(a),Ne(this))};
function Oe(a,b){var c=C(),d=y();a.$a.forEach(function(a,b){var h=this.O.get(b),k=new id(b);if(this.Oc.has(a)){var n=D(this.Oc.get(a));n.forEach(function(a){c.add(a)});Ge(h,n).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){var h=a.val();a=d.get(h.T);var k=this.O.get(a.getName()),h=this.i.table(a.getName()).ob({id:b,value:h.P});k.getData().has(b)?a.modify([Ge(k,[b])[0],h]):a.add(h)}}}.bind(a));return z(d).filter(function(a){return!a.nd()})}
function Ee(a,b){var c=fb(),d=a.$a.get(b),e=a.i.table(b);a.l.orderByChild("T").equalTo(d).once("value",function(a){var d=new Fe,k=[];a.forEach(function(a){k.push(e.ob({id:parseInt(a.key(),10),value:a.val().P}))});He(d,k);this.O.set(b,d);c.resolve()}.bind(a));return c.ga}function Le(a){var b={};b["@db"]={version:a.i.version()};b["@rev"]={R:1};a.Ta=1;b["@table"]={};a.i.ra().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.O.set(e,new Fe);this.$a.set(e,d)},a);return b}
m.Jb=function(a,b,c){return new De(this,a,c)};m.Fc=function(a){var b=this.O.get(a)||null;if(null!==b)return b;throw new E(101,a);};m.close=aa();m.subscribe=ba("Md");m.Kc=function(a){null!=this.Md&&this.Md(a)};function N(a,b,c,d){this.l=b;this.la=c;this.Va=a;this.Yc=d}r("lf.backstore.IndexedDBRawBackStore",N);N.prototype.gd=g("l");N.prototype.getRawDBInstance=N.prototype.gd;N.prototype.hd=g("la");N.prototype.getRawTransaction=N.prototype.hd;N.prototype.yc=function(a){return new v(function(b,c){try{this.l.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.yc;
function Pe(a,b,c,d){return new v(function(a,f){var h;try{var k=this.la.objectStore(b);h=k.openCursor()}catch(n){f(n);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=f},a)}function Qe(a){var b=null;return b=a instanceof ArrayBuffer?ac(a):a instanceof Date?a.getTime():a}
function Re(a,b,c){function d(a){var b=Cc(a.value),d=b.s,e;for(e in d){var B=Zb(d[e]);c(B);d[e]=B.La()}a.update(b.La())}function e(a){var b=Zb(a.value);c(b);a.update(b.La())}return Pe(a,b,a.Yc?d:e,aa())}N.prototype.vc=function(a,b,c){var d=Qe(c);return Re(this,a,function(a){a.s[b]=d})};N.prototype.addTableColumn=N.prototype.vc;N.prototype.zc=function(a,b){return Re(this,a,function(a){delete a.s[b]})};N.prototype.dropTableColumn=N.prototype.zc;
N.prototype.Pc=function(a,b,c){return Re(this,a,function(a){a.s[c]=a.s[b];delete a.s[b]})};N.prototype.renameTableColumn=N.prototype.Pc;function Se(a,b){var c=[];return new v(function(a,e){var f;try{f=this.la.objectStore(b).openCursor()}catch(h){e(h);return}f.onsuccess=function(){var b=f.result;if(b){if(this.Yc){var e;e=Cc(b.value).s;for(var n in e)c.push(e[n])}else c.push(b.value);b.continue()}else a(c)}.bind(this);f.onerror=e},a)}N.prototype.Bb=function(a){var b={},c;for(c in a)b[c]=Qe(a[c]);return $b(b)};
N.prototype.createRow=N.prototype.Bb;N.prototype.Hc=g("Va");N.prototype.getVersion=N.prototype.Hc;N.prototype.dump=function(){for(var a=this.l.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.ic(d))}return eb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.ic=function(a){return Se(this,a).then(function(a){return a.map(function(a){return a.value})})};function Te(a,b){this.Z=a;this.Kb=b}Te.prototype.get=function(a){if(0==a.length)return null!=this.Z.getAll?Ue(this):Ve(this);a=a.map(function(a){return new v(function(c,d){var e;try{e=this.Z.get(a)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(a){c(this.Kb(a.target.result))}.bind(this)},this)},this);return eb(a)};
function Ve(a){return new v(function(a,c){var d=[],e;try{e=this.Z.openCursor()}catch(f){c(f);return}e.onerror=c;e.onsuccess=function(){var c=e.result;c?(d.push(this.Kb(c.value)),c.continue()):a(d)}.bind(this)},a)}function Ue(a){return new v(function(a,c){var d;try{d=this.Z.getAll()}catch(e){c(e);return}d.onerror=c;d.onsuccess=function(){var c=d.result.map(function(a){return this.Kb(a)},this);a(c)}.bind(this)},a)}
Te.prototype.Xb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};Te.prototype.put=function(a){if(0==a.length)return w();a=a.map(function(a){return this.Xb(function(){return this.Z.put(a.La())}.bind(this))},this);return eb(a)};
Te.prototype.remove=function(a){return new v(function(b,c){var d=this.Z.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Xb(function(){return this.Z.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Xb(function(){return this.Z.delete(a)}.bind(this))},this);eb(d).then(b,c)}.bind(this);d.onerror=c},this)};function We(a,b,c,d,e){cc.call(this,c,e);this.g=a;this.la=b;this.Yc=d;this.la.oncomplete=this.U.resolve.bind(this.U);this.la.onabort=this.U.reject.bind(this.U)}t(We,cc);We.prototype.K=function(a,b,c){return this.Yc?(c=null!=c?c:0,a=this.la.objectStore(a),new Dc(a,b,0==c?qa(Fc,this.g):Gc)):new Te(this.la.objectStore(a),b)};We.prototype.xc=function(){return this.U.ga};function Xe(a,b){this.g=a;this.i=b;this.Jd=b.mf().Wf||!1}m=Xe.prototype;
m.Ga=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new E(352);var c=a||function(){return w()};return new v(function(a,e){var f;try{f=b.open(this.i.name(),this.i.version())}catch(h){e(h);return}f.onerror=function(a){a=a.target.error;e(new E(361,a.name,a.message))};f.onupgradeneeded=function(a){Ye(this,c,a).then(aa(),e)}.bind(this);f.onsuccess=function(b){this.l=b.target.result;this.se().then(function(b){Yb=b+1;a(this.l)}.bind(this))}.bind(this)},
this)};function Ye(a,b,c){var d=c.target.result;c=new N(c.oldVersion,d,c.target.transaction,a.Jd);Ze(d);a.i.ra().forEach(qa(a.Pf,d),a);return b(c)}function Ze(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}
m.Pf=function(a,b){a.objectStoreNames.contains(b.getName())||a.createObjectStore(b.getName(),{keyPath:"id"});b.Hb()&&(b.Fa().forEach(function(b){$e(a,b.m())},this),$e(a,af(b)))};function $e(a,b){a.objectStoreNames.contains(b)||a.createObjectStore(b,{keyPath:"id"})}m.Jb=function(a,b,c){b=this.l.transaction(bf(b),0==a?"readonly":"readwrite");return new We(this.g,b,a,this.Jd,c)};
function bf(a){var b=C();a.forEach(function(a){b.add(a.getName());a.Hb()&&(a.Fa().forEach(function(a){b.add(a.m())}),b.add(af(a)))});return D(b)}
m.se=function(a){function b(){if(0==d.length)return w();var a=d.shift();return c(a).then(b)}function c(b){return new v(function(c,d){var O;try{O=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(ea){d(ea);return}O.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};O.onerror=function(){c(f)}})}var d=this.i.ra().map(function(a){return a.getName()}),e=this.l,f=0,h=function(a){return this.Jd?(a=Cc(a.value),Object.keys(a.s).reduce(function(a,b){return Math.max(a,b)},
0)):a.key}.bind(this);return new v(function(a){b().then(function(){a(f)})})};m.close=function(){this.l.close()};m.Fc=function(){throw new E(511);};m.subscribe=aa();m.Kc=aa();function cf(a,b,c){cc.call(this,b,c);this.Z=a;0==b&&this.U.resolve()}t(cf,cc);cf.prototype.K=function(a){return this.Z.Fc(a)};cf.prototype.xc=function(){this.U.resolve();return this.U.ga};function df(a){this.i=a;this.O=y()}m=df.prototype;m.Ga=function(){this.i.ra().forEach(this.jg,this);return w()};m.Fc=function(a){var b=this.O.get(a)||null;if(null===b)throw new E(101,a);return b};m.Jb=function(a,b,c){return new cf(this,a,c)};function ef(a,b){if(!a.O.has(b)){var c=new Fe;a.O.set(b,c)}}m.jg=function(a){ef(this,a.getName());a.Hb()&&(a.Fa().forEach(function(a){ef(this,a.m())},this),ef(this,af(a)))};m.close=aa();m.subscribe=aa();m.Kc=aa();function ff(a){df.call(this,a);this.td=null}t(ff,df);ff.prototype.subscribe=function(a){null===this.td&&(this.td=a)};ff.prototype.Kc=function(a){null===this.td||this.td(a)};function gf(a,b,c){this.la=a;this.C='"'+b+'"';this.Kb=c}gf.prototype.get=function(a){var b=this.Kb;return hf(this.la,"SELECT id, value FROM "+this.C+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
gf.prototype.put=function(a){if(0==a.length)return w();var b="INSERT OR REPLACE INTO "+this.C+"(id, value) VALUES (?, ?)";a.forEach(function(a){hf(this.la,b,[a.id(),JSON.stringify(a.s)])},this);return w()};gf.prototype.remove=function(a){hf(this.la,"DELETE FROM "+this.C+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return w()};function jf(a,b,c){cc.call(this,b,c);this.l=a;this.O=y();this.Qd=[]}t(jf,cc);function kf(a){return a.replace(".","__d__").replace("#","__s__")}jf.prototype.K=function(a,b){var c=this.O.get(a)||null;null===c&&(c=new gf(this,kf(a),b),this.O.set(a,c));return c};function hf(a,b,c,d){var e=fb();a.Qd.push({Qg:b,Gg:c,transform:d,U:e});return e.ga}
jf.prototype.xc=function(){var a=null,b=this.U.reject.bind(this.U),c=function(a,b){this.U.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var k=h;null!=a.transform&&null!=h&&(k=a.transform(h));d.push(k);a.U.resolve(k)}0<this.Qd.length?(a=k=this.Qd.shift(),b.executeSql(k.Qg,k.Gg,e,c)):this.U.resolve(d)}.bind(this);0==this.Bd?this.l.readTransaction(e,b):this.l.transaction(e,b);return this.U.ga};function P(a,b,c){this.l=c;this.g=a;this.Va=b}r("lf.backstore.WebSqlRawBackStore",P);P.prototype.gd=g("l");P.prototype.getRawDBInstance=P.prototype.gd;P.prototype.hd=function(){throw new E(356);};P.prototype.getRawTransaction=P.prototype.hd;function mf(a){return new jf(a.l,1,new kd(a.g,C()))}P.prototype.yc=function(a){var b=mf(this);hf(b,"DROP TABLE "+a,[]);return b.ma()};P.prototype.dropTable=P.prototype.yc;
P.prototype.ic=function(a){var b=mf(this);hf(b,"SELECT id, value FROM "+a,[]);return b.ma().then(function(a){for(var b=a[0].rows.length,e=Array(b),f=0;f<b;++f)e[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return w(e)})};function nf(a,b,c){var d=mf(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.ic(b).then(function(a){a.forEach(function(a){a=c(a);hf(d,e,[JSON.stringify(a.value),a.id])});return d.ma()})}
P.prototype.vc=function(a,b,c){var d=Qe(c);return nf(this,a,function(a){a.value[b]=d;return a})};P.prototype.addTableColumn=P.prototype.vc;P.prototype.zc=function(a,b){return nf(this,a,function(a){delete a.value[b];return a})};P.prototype.dropTableColumn=P.prototype.zc;P.prototype.Pc=function(a,b,c){return nf(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};P.prototype.renameTableColumn=P.prototype.Pc;P.prototype.Bb=function(a){var b={},c;for(c in a)b[c]=Qe(a[c]);return $b(b)};
P.prototype.createRow=P.prototype.Bb;P.prototype.Hc=g("Va");P.prototype.getVersion=P.prototype.Hc;function of(a){hf(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
P.prototype.dump=function(){var a=fb(),b=mf(this);of(b);var c={};b.ma().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.ic(a).then(function(b){c[a]=b})},this);eb(b).then(function(){a.resolve(c)})}.bind(this));return a.ga};P.prototype.dump=P.prototype.dump;function pf(a,b,c){this.g=a;this.i=b;this.Pg=c||1}m=pf.prototype;m.Ga=function(a){if(null==window.openDatabase)throw new E(353);var b=a||function(){return w()};return new v(function(a){var d=window.openDatabase(this.i.name(),"",this.i.name(),this.Pg);if(null!=d)this.l=d,qf(this,b).then(a,function(a){if(a instanceof E)throw a;throw new E(354,a.message);});else throw new E(354);},this)};
function qf(a,b){var c=fb(),d=new jf(a.l,1,new kd(a.g,C()));hf(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);hf(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ma().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.i.version()?this.je(b,d).then(c.resolve.bind(c)):d>this.i.version()?c.reject(new E(108)):c.resolve()}.bind(a),c.reject.bind(c));return c.ga}m.Jb=function(a,b,c){if(null!=this.l)return new jf(this.l,a,c);throw new E(2);};m.close=aa();
m.Fc=function(){throw new E(512);};m.subscribe=function(){throw new E(355);};m.Kc=function(){throw new E(355);};m.je=function(a,b){var c=fb();rf(this).then(function(){a(new P(this.g,b,this.l)).then(function(){return this.se()}.bind(this)).then(c.resolve.bind(c))}.bind(this),c.reject.bind(c));return c.ga};
function rf(a){var b=a.i.ra(),c=new jf(a.l,1,new kd(a.g,C())),d=new jf(a.l,1,new kd(a.g,C()));hf(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.i.version()]);of(c);return c.ma().then(function(a){var c=a[1];c.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){hf(d,"DROP TABLE "+('"'+a+'"'),[])});var h=[],k=[],n=[];b.map(function(a){-1==c.indexOf(a.getName())&&h.push(a.getName());a.Hb&&(a.Fa().forEach(function(a){a=kf(a.m());h.push(a);k.push(a)}),a=kf(af(a)),h.push(a),n.push(a))});
h.forEach(function(a){hf(d,"CREATE TABLE "+('"'+a+'"')+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return d.ma()})}m.se=function(){var a=0,b=fb(),c=function(b){var c=new jf(this.l,0);hf(c,"SELECT MAX(id) FROM "+('"'+b+'"'),[]);return c.ma().then(function(b){b=b[0].rows.item(0)[0];a=Math.max(b,a)})}.bind(this),d=this.i.ra().map(function(a){return c(a.getName())});eb(d).then(function(){b.resolve(a)},function(a){b.reject(a)});return b.ga};function sf(a){this.o=y();this.dc=y();a.ra().forEach(function(a){this.dc.set(a.getName(),C())},this)}m=sf.prototype;m.set=function(a,b){this.o.set(b.id(),b);this.dc.get(a).add(b.id())};m.$b=function(a,b){var c=this.dc.get(a);b.forEach(function(a){this.o.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.o.get(a)||null};function tf(a,b){return b.map(function(a){return this.get(a)},a)}
m.Wa=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.dc.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.o.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.o.get(b),d.push(c));return d};m.remove=function(a,b){this.o.delete(b);this.dc.get(a).delete(b)};m.Ec=function(a){return null!=a?this.dc.get(a).size:this.o.size};m.clear=function(){this.o.clear();this.dc.clear()};function uf(a,b,c){var d=0,e=a.length;for(c=c||vf;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function vf(a,b){return a-b}function wf(a,b,c){c=uf(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function xf(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function yf(){this.ka=0}yf.prototype.add=function(a,b){this.ka+=b};yf.prototype.remove=function(a,b){this.ka-=b};yf.prototype.clear=function(){this.ka=0};function zf(a,b){a.clear();b.forEach(function(a){this.ka+=a.ka},a)};function Af(a,b,c,d){this.C=a;this.$=b;this.Bf=c;this.Ba=new yf;if(d){a=511;a*=a*a;if(d.length>=a)throw new E(6,a);d=Bf(this,d);this.wa=d=Cf(d)}else this.clear()}var Df=[];m=Af.prototype;m.getName=g("C");m.toString=function(){return this.wa.toString()};m.add=function(a,b){this.wa=this.wa.Eb(a,b)};m.set=function(a,b){this.wa=this.wa.Eb(a,b,!0)};m.remove=function(a,b){this.wa=this.wa.remove(a,b)};m.get=function(a){return this.wa.get(a)};
m.bd=function(a){if(null==a)return this.ca().ka;if(a instanceof F){if(qd(a))return this.ca().ka;if(ud(a))return this.get(a.c).length}return this.Wa([a]).length};m.ca=g("Ba");m.Xd=function(a,b,c,d){c=Array(a);this.wa.fill({offset:b?this.Ba.ka-a-d:d,count:a,ve:0},c);return b?c.reverse():c};
m.Wa=function(a,b,c,d){var e=Ef(this.wa).b[0];if(!q(e)||0==c)return Df;b=b||!1;c=null!=c?Math.min(c,this.Ba.ka):this.Ba.ka;d=d||0;var f=Math.min(Math.max(this.Ba.ka-d,0),c);if(0==f)return Df;if(!q(a)||1==a.length&&a[0]instanceof F&&qd(a[0]))return this.Xd(f,b,c,d);a=this.$.xf(a);var h=Array(b?this.Ba.ka:f),k={count:0,X:h.length,reverse:b,N:d},n=1<this.nb().be();a.forEach(function(a){for(var b=this.$.xd(a),b=this.$.$d(a)?e:b[0],b=this.wa.cg(b),c=0;null!=b&&k.count<k.X;){if(n){for(var d=b,f=a,ec=k,
Cb=h,Uc=d.A.nb(),ne=-1,Ma=0;Ma<d.b.length;++Ma)if(Uc.Fb(d.b[Ma],f)){ne=Ma;break}if(-1!=ne)for(Ma=ne;Ma<d.b.length&&ec.count<ec.X;++Ma)Uc.Fb(d.b[Ma],f)&&Ff(d,ec,Cb,Ma)}else b.Wa(a,k,h);0!=k.N||b.od(a)?c=0:c++;b=2==c?null:b.next()}},this);h.length>k.count&&h.splice(k.count,h.length-k.count);return b?xf(h,b,c,d):h};m.clear=function(){this.wa=Gf(this);this.Ba.clear()};m.Qa=function(a){return this.wa.Qa(a)};m.min=function(){return this.Mb(this.$.min.bind(this.$))};m.max=function(){return this.Mb(this.$.max.bind(this.$))};
function Hf(a,b,c){if(!a.$.Rd(b.b[c]))if(1<b.b[c].length){if(null===b.b[c][0])return null}else return null;return[b.b[c],a.Bf?[b.D[c]]:b.D[c]]}m.Mb=function(a){var b;a:{b=Ef(this.wa);var c=0;do if(c>=b.b.length)b=b.Aa,c=0;else{var d=Hf(this,b,c);if(null!==d){b=d;break a}c++}while(null!==b);b=null}a:{c=If(this.wa);d=c.b.length-1;do if(0>d)c=c.vb,d=0;else{var e=Hf(this,c,d);if(null!==e){c=e;break a}d--}while(null!==c);c=null}return null===b||null===c?null:1==a(b[0],c[0])?b:c};m.Na=g("Bf");m.nb=g("$");
m.Ra=function(a,b){return null!=a?0==this.$.compare(a,b):!1};m.La=function(){for(var a=[],b=Ef(this.wa);b;)a.push(new Xb(b.ua,[b.b,b.D])),b=b.Aa;return a};function Jf(a,b,c,d){a=new Af(b,a,c);d=Kf(d,a);a.wa=d;return a}function Lf(a,b){this.ua=a;this.A=b;this.qb=0;this.Aa=this.vb=this.H=null;this.b=[];this.D=[];this.j=[];this.cg=1==b.nb().be()?this.Re:this.Qe}function Gf(a){return new Lf(Yb++,a)}function Q(a){return 0==a.qb}m=Lf.prototype;m.next=g("Aa");
function Mf(a){function b(a){return null!=a?a.ua.toString():"_"}var c=a.ua+"["+a.b.join("|")+"]",d=a.j.map(function(a){return a.ua}).join("|"),e=a.D.join("/"),f=b(a.vb)+"{",f=Q(a)?f+e:f+d,f=f+"}"+b(a.H);a.Aa&&(a=Mf(a.Aa),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=Mf(this),a=a+(b[0]+"\n"+b[1]+"\n");this.j.length&&(a+=this.j[0].toString());return a};function Ef(a){return Q(a)?a:Ef(a.j[0])}function If(a){return Q(a)?a:If(a.j[a.j.length-1])}
function Nf(a,b){b&&(b.vb=a);a&&(a.Aa=b)}function Bf(a,b){for(var c=b.length,d=0,e=Gf(a),f=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.b=k.map(function(a){return a.key});e.D=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=Gf(e.A),Nf(e,h),e=h)}return f}function Of(a){var b=a[0],c=Gf(b.A);c.qb=b.qb+1;c.j=a;for(b=0;b<a.length;++b)a[b].H=c,0<b&&c.b.push(a[b].b[0]);return c}
function Cf(a){var b=a,c=[];do c.push(b),b=b.Aa;while(b);if(512>=c.length)b=Of(c);else{var d=c.length,e=0,b=Gf(a.A);for(b.qb=a.qb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=Of(f);h.H=b;b.j.length&&(b.b.push(f[0].b[0]),Nf(b.j[b.j.length-1],h));b.j.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=Pf(this,a);if(Q(this)){var c=Df;this.A.Ra(this.b[b],a)&&(c=c.concat(this.D[b]));return c}b=this.A.Ra(this.b[b],a)?b+1:b;return this.j[b].get(a)};
m.Qa=function(a){var b=Pf(this,a);return this.A.Ra(this.b[b],a)?!0:Q(this)?!1:this.j[b].Qa(a)};m.remove=function(a,b){Qf(this,a,-1,b);if(null===this.H){var c=this;1==this.j.length&&(c=this.j[0],c.H=null);return c}return this};function Rf(a){return Q(a)?a.b[0]:Rf(a.j[0])}function Sf(a){a.b=[];for(var b=1;b<a.j.length;++b)a.b.push(Rf(a.j[b]))}
function Qf(a,b,c,d){var e=Pf(a,b),f=Q(a);if(!f){var h=a.A.Ra(a.b[e],b)?e+1:e;if(Qf(a.j[h],b,h,d))Sf(a);else return!1}else if(!a.A.Ra(a.b[e],b))return!1;if(a.b.length>e&&a.A.Ra(a.b[e],b)){if(q(d)&&!a.A.Na()&&f&&(h=a.D[e],d=uf(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.A.ca().remove(b,1),a.D[e].length))return!1;a.b.splice(e,1);f&&(f=a.A.Na()?1:a.D[e].length,a.D.splice(e,1),a.A.ca().remove(b,f))}if(256>a.b.length&&null!==a.H){a:{b=null;if(a.Aa&&256<a.Aa.b.length)b=a.Aa,e=d=0,f=a.b.length+1;else if(a.vb&&
256<a.vb.b.length)b=a.vb,d=a.vb.b.length-1,e=Q(a)?d:d+1,f=0;else{b=!1;break a}a.b.splice(f,0,b.b[d]);b.b.splice(d,1);d=Q(a)?a.D:a.j;h=null;Q(a)?h=b.D:(h=b.j,h[e].H=a);d.splice(f,0,h[e]);h.splice(e,1);Q(b)||(Sf(b),Sf(a));b=!0}b||Tf(a,c)}return!0}
function Tf(a,b){var c,d,e;a.Aa&&511>a.Aa.b.length?(c=a.Aa,e=d=0):a.vb&&(c=a.vb,d=c.b.length,e=Q(c)?c.D.length:c.j.length);d=[d,0].concat(a.b);Array.prototype.splice.apply(c.b,d);d=null;Q(a)?d=a.D:(d=a.j,d.forEach(function(a){a.H=c}));d=[e,0].concat(d);Array.prototype.splice.apply(Q(c)?c.D:c.j,d);Nf(a.vb,a.Aa);Q(c)||Sf(c);-1!=b&&(a.H.b.splice(b,1),a.H.j.splice(b,1))}
m.Eb=function(a,b,c){var d=Pf(this,a);if(Q(this)){if(this.A.Ra(this.b[d],a)){if(c)this.A.ca().remove(a,this.A.Na()?1:this.D[d].length),this.D[d]=this.A.Na()?b:[b];else{if(this.A.Na())throw new E(201);if(!wf(this.D[d],b))throw new E(109);}this.A.ca().add(a,1);return this}this.b.splice(d,0,a);this.D.splice(d,0,this.A.Na()?b:[b]);this.A.ca().add(a,1);512==this.b.length?(d=Gf(this.A),a=Gf(this.A),a.qb=1,a.b=[this.b[256]],a.j=[this,d],a.H=this.H,this.H=a,d.b=this.b.splice(256),d.D=this.D.splice(256),d.H=
a,Nf(d,this.Aa),Nf(this,d),d=a):d=this;return d}d=this.A.Ra(this.b[d],a)?d+1:d;a=this.j[d].Eb(a,b,c);Q(a)||1!=a.b.length||(this.b.splice(d,0,a.b[0]),a.j[1].H=this,a.j[0].H=this,this.j.splice(d,1,a.j[1]),this.j.splice(d,0,a.j[0]));return 512==this.b.length?Uf(this):this};function Uf(a){var b=Gf(a.A),c=Gf(a.A);b.H=a.H;b.qb=a.qb+1;b.b=[a.b[256]];b.j=[a,c];a.b.splice(256,1);c.H=b;c.qb=a.qb;c.b=a.b.splice(256);c.j=a.j.splice(257);c.j.forEach(function(a){a.H=c});a.H=b;Nf(c,a.Aa);Nf(a,c);return b}
function Pf(a,b){for(var c=0,d=a.b.length,e=a.A.nb();c<d;){var f=c+d>>1;-1==e.compare(a.b[f],b)?c=f+1:d=f}return c}m.Re=function(a){if(!Q(this)){var b=Pf(this,a);this.A.Ra(this.b[b],a)&&b++;return this.j[b].Re(a)}return this};m.Qe=function(a){if(!Q(this)){var b=Pf(this,a);this.A.Ra(this.b[b],a)&&(a.some(function(a){return a==G})||b++);return this.j[b].Qe(a)}return this};
m.Wa=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.A.nb(),f=0,h=this.b.length-1,k=this.b,n=d(e.Ab(k[f],a)),B=d(e.Ab(k[h],a));if(1!=n&&(-1!=n||-1!=B)){var O=function(a,b){var c=a+b>>1;return c==a?c+1:c},ea=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.Ab(k[b],a));if(0==h)return b;if(1==h)return-1;h=O(b,c);if(h==c)return 0==f?c:-1;var n=d(e.Ab(k[h],a));return 0==n?ea(b,h,n):-1==n?ea(h+1,c,f):ea(b+1,h,n)},Bb=function(b,c){if(b>=c)return b;var f=d(e.Ab(k[c],a));if(0==f)return c;
if(-1==f)return b;f=O(b,c);if(f==c)return b;var h=d(e.Ab(k[f],a));return 0==h?Bb(f,c):1==h?Bb(b,f-1):-1};0!=n&&(f=ea(f+1,h,B));-1!=f&&(h=Bb(f,h),-1!=h&&h>=f&&Vf(this,b,c,f,h+1))}};function Ff(a,b,c,d){if(a.A.Na())!b.reverse&&b.N?b.N--:c[b.count++]=a.D[d];else for(var e=0;e<a.D[d].length&&b.count<c.length;++e)!b.reverse&&b.N?b.N--:c[b.count++]=a.D[d][e]}function Vf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.X));++d)Ff(a,b,c,d)}
m.fill=function(a,b){if(Q(this))for(var c=0;c<this.D.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.A.Na()?1:this.D[c].length,0>a.offset)for(var d=this.D[c].length+a.offset;d<this.D[c].length&&0<a.count;++d)b[a.ve++]=this.D[c][d],a.count--}else if(this.A.Na())b[a.ve++]=this.D[c],a.count--;else for(d=0;d<this.D[c].length&&0<a.count;++d)b[a.ve++]=this.D[c][d],a.count--;else for(c=0;c<this.j.length&&0<a.count;++c)this.j[c].fill(a,b)};
function Kf(a,b){for(var c=b.ca(),d=a.map(function(a){var d=new Lf(a.id(),b);d.b=a.s[0];d.D=a.s[1];d.b.forEach(function(a,e){c.add(a,b.Na()?1:d.D[e].length)});return d}),e=0;e<d.length-1;++e)Nf(d[e],d[e+1]);return 1<d.length?Cf(d[0]):d[0]}m.od=function(a){return this.A.nb().od(this.b[0],a)};function Wf(a){this.ad=0==a?Xf:Yf;this.ee=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.ke=0==a?Zf:$f}function Yf(a,b){return a>b?1:a<b?-1:0}function Xf(a,b){return Yf(b,a)}function $f(a,b){return vd(a,b)}function Zf(a,b){return vd(b,a)}m=Wf.prototype;m.Ab=function(a,b){var c=this.ee(b),d=[c.c==G,c.u==G];if(!d[0]){var e=this.ad(a,c.c);d[0]=c.ha?1==e:-1!=e}d[1]||(e=this.ad(a,c.u),d[1]=c.qa?-1==e:1!=e);return d};m.compare=function(a,b){return this.ad(a,b)};
m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Fb=function(a,b){var c=this.Ab(a,b);return c[0]&&c[1]};m.od=function(a,b){return this.Fb(a,b)};m.xf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.ke(a,c)}.bind(this))};m.$d=function(a){return this.ee(a).c==G};m.xd=function(a){a=this.ee(a);return[a.c,a.u]};m.Rd=function(a){return null!==a};m.be=l(1);
m.toString=function(){return this.compare==Xf?"SimpleComparator_DESC":"SimpleComparator_ASC"};function ag(a){Wf.call(this,a);this.ad=0==a?cg:dg}t(ag,Wf);function dg(a,b){return null===a?null===b?0:-1:null===b?1:Yf(a,b)}function cg(a,b){return dg(b,a)}ag.prototype.Fb=function(a,b){return null===a?qd(b):ag.jb.Fb.call(this,a,b)};ag.prototype.Mb=function(a,b){return null===a?null===b?0:-1:null===b?1:null};ag.prototype.min=function(a,b){var c=this.Mb(a,b);null===c&&(c=ag.jb.min.call(this,a,b));return c};
ag.prototype.max=function(a,b){var c=this.Mb(a,b);null===c&&(c=ag.jb.max.call(this,a,b));return c};function eg(a){this.sa=a.map(function(a){return new Wf(a)})}function fg(a,b,c,d){for(var e=0,f=0;f<a.sa.length&&0==e;++f)e=d(a.sa[f],b[f],c[f]);return e}m=eg.prototype;m.compare=function(a,b){return fg(this,a,b,function(a,b,e){return b==G||e==G?0:a.compare(b,e)})};m.min=function(a,b){return fg(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return fg(this,a,b,function(a,b,e){return a.max(b,e)})};
m.Ab=function(a,b){for(var c=[!0,!0],d=0;d<this.sa.length&&(c[0]||c[1]);++d){var e=this.sa[d].Ab(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Fb=function(a,b){for(var c=!0,d=0;d<this.sa.length&&c;++d)c=this.sa[d].Fb(a[d],b[d]);return c};m.od=function(a,b){return this.sa[0].Fb(a[0],b[0])};
m.xf=function(a){var b=a.filter(function(a){return a.every(ga)});a=Array(this.sa.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.sa[b].ke(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.sa.length&&0==c;++h)c=this.sa[h].ke(a[h],b[h]);return c}.bind(this))};m.$d=function(a){return this.sa[0].$d(a[0])};
m.xd=function(a){var b=a.map(function(a,b){return this.sa[b].xd(a)[0]},this);a=a.map(function(a,b){return this.sa[b].xd(a)[1]},this);return[b,a]};m.Rd=function(a){return a.every(function(a,c){return this.sa[c].Rd(a)},this)};m.be=function(){return this.sa.length};function gg(a){eg.call(this,a);this.sa=a.map(function(a){return new ag(a)})}t(gg,eg);function hg(a){if(1==a.h.length)return new Wf(a.h[0].ub);var b=a.h.map(function(a){return a.ub});return a.h.some(function(a){return a.da.mc()})?new gg(b):new eg(b)};function ig(a){this.ia=a;this.sb=C();this.Sc=new yf;this.Ba=new yf}m=ig.prototype;m.getName=function(){return this.ia.getName()};m.add=function(a,b){null===a?(this.sb.add(b),this.Sc.add(a,1)):this.ia.add(a,b)};m.set=function(a,b){null===a?(this.sb.clear(),this.Sc.clear(),this.add(a,b)):this.ia.set(a,b)};m.remove=function(a,b){null===a?b?(this.sb.delete(b),this.Sc.remove(a,1)):(this.sb.clear(),this.Sc.clear()):this.ia.remove(a,b)};m.get=function(a){return null===a?D(this.sb):this.ia.get(a)};m.bd=function(a){return this.ia.bd(a)};
m.ca=function(){zf(this.Ba,[this.ia.ca(),this.Sc]);return this.Ba};m.Wa=function(a,b,c,d){b=this.ia.Wa(a,b,c,d);return null!=a?b:b.concat(D(this.sb))};m.clear=function(){this.sb.clear();this.ia.clear()};m.Qa=function(a){return null===a?0!=this.sb.size:this.ia.Qa(a)};m.min=function(){return this.ia.min()};m.max=function(){return this.ia.max()};m.La=function(){return[new Xb(-2,D(this.sb))].concat(this.ia.La())};m.nb=function(){return this.ia.nb()};
function jg(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new E(102);var d=b[c].s,e=b.slice(0);e.splice(c,1);var c=a(e),f=new ig(c);d.forEach(function(a){f.sb.add(a)});return f}m.Na=function(){return this.ia.Na()};function kg(a){this.C=a;this.xb=C();this.$=new Wf(1)}m=kg.prototype;m.getName=g("C");m.add=function(a){if("number"!=typeof a)throw new E(103);this.xb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.xb.delete(a)};m.get=function(a){return this.Qa(a)?[a]:[]};m.min=function(){return this.Mb(this.$.min.bind(this.$))};m.max=function(){return this.Mb(this.$.max.bind(this.$))};
m.Mb=function(a){if(0==this.xb.size)return null;var b=D(this.xb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.bd=function(){return this.xb.size};m.Wa=function(a,b,c,d){var e=a||[td()];a=D(this.xb).filter(function(a){return e.some(function(b){return this.$.Fb(a,b)},this)},this);return xf(a,b,c,d)};m.clear=function(){this.xb.clear()};m.Qa=function(a){return this.xb.has(a)};m.La=function(){return[new Xb(0,D(this.xb))]};m.nb=g("$");
function lg(a,b){var c=new kg(a);b[0].s.forEach(function(a){c.add(a,a)});return c}m.Na=l(!0);m.ca=function(){var a=new yf;a.ka=this.xb.size;return a};function mg(a){this.Pa=a.f(lc);this.G=a.f(nc);this.W=a.f(mc)}mg.prototype.Ga=function(a){var b=a.ra(),c=function(){if(0==b.length)return w();var a=b.shift();return(a.Hb()?ng(this,a):og(this,a)).then(c)}.bind(this);return c()};function og(a,b){var c=a.Pa.Jb(0,[b]),d=c.K(b.getName(),b.ob.bind(b),0).get([]).then(function(a){this.W.$b(b.getName(),a);pg(this,b,a)}.bind(a));c.ma();return d}
function pg(a,b,c){var d=a.G.qc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.rb(b.getName());b.add(c,a.id())})})}function ng(a,b){var c=a.Pa.Jb(0,[b]),d=c.K(b.getName(),b.ob,0).get([]).then(function(a){this.W.$b(b.getName(),a)}.bind(a)),e=b.Fa().map(function(a){return qg(this,a,c)},a).concat(rg(a,b,c));c.ma();return eb(e.concat(d))}
function qg(a,b,c){c=c.K(b.m(),Zb,1);var d=hg(b);return c.get([]).then(function(a){if(0<a.length){if(sg(b)){var c=Jf.bind(void 0,d,b.m(),b.Ic);a=jg(c,a)}else a=Jf(d,b.m(),b.Ic,a);this.G.set(b.rc,a)}}.bind(a))}function rg(a,b,c){return c.K(af(b),Zb,1).get([]).then(function(a){0<a.length&&(a=lg(af(b),a),this.G.set(b.getName(),a))}.bind(a))};function tg(){this.Z=y();this.qc=y()}tg.prototype.Ga=function(a){a.ra().forEach(function(a){var c=[];this.qc.set(a.getName(),c);var d=af(a);if(null===this.get(d)){var e=new kg(d);c.push(e);this.Z.set(d,e)}a.Fa().forEach(function(a){var b;b=hg(a);b=new Af(a.m(),b,a.Ic);b=sg(a)&&1==a.h.length?new ig(b):b;c.push(b);this.Z.set(a.m(),b)},this)},this);return w()};tg.prototype.get=function(a){return this.Z.get(a)||null};
tg.prototype.set=function(a,b){var c=this.qc.get(a)||null;null===c&&(c=[],this.qc.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.Z.set(b.getName(),b)};function ug(a,b){var c=[],d=null,e=null;be(a,function(a){var h=b(a);null==a.getParent()?e=h:L(d,h);var k=a.getParent();null!==k&&K(k).length==K(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<K(a).length&&c.push(h);d=null===a.j?c[c.length-1]:h});return e}function vg(a){return wg(a,function(a){return null===a.j})}
function xg(a){var b=a.getParent(),c=0;null!==b&&(c=K(b).indexOf(a),b.removeChild(a));var d=K(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||Zd(b,d,c+f)});return{parent:b,children:d}}function yg(a,b){K(a).slice().forEach(function(c){a.removeChild(c);L(b,c)});L(a,b)}function zg(a){var b=Yd(a,0);xg(a);yg(b,a);return b}
function Ag(a,b,c){var d=Yd(a,0),e=K(d).slice();if(!e.some(function(a){return b(a)}))return a;xg(a);e.forEach(function(e,h){if(b(e)){var k=c(a);$d(d,h);L(k,e);Zd(d,k,h)}});return d}function Bg(a,b,c,d){var e=a.getParent();null!==e&&(a=K(e).indexOf(a),$d(e,a),Zd(e,c,a));K(b).slice().forEach(function(a){b.removeChild(a);L(d,a)});return c}function wg(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||K(a).forEach(d)}var e=[];d(a);return e}
function Cg(a,b){var c=b||function(a){return a.toString()+"\n"},d="";be(a,function(a){for(var b=0;b<Xd(a);b++)d+="-";d+=c(a)});return d};function Dg(a){ce.call(this);this.tb=a;this.Xa=!1}t(Dg,ce);m=Dg.prototype;m.Rb=function(){return ug(this,function(a){if(a instanceof Dg){var b=new Dg(a.tb);b.Xa=a.Xa;a=a.aa();b.ua=a;return b}return a.Rb()})};m.pb=function(a){var b=a||[];be(this,function(a){a!=this&&a.pb(b)}.bind(this));a=C(b);return D(a)};m.w=function(a){var b=null!=a?a:C();be(this,function(a){a!=this&&a.w(b)}.bind(this));return b};m.yd=function(a){this.Xa!=a&&(this.Xa=a,this.tb="and"==this.tb?"or":"and",K(this).forEach(function(b){return b.yd(a)}))};
m.eval=function(a){var b=K(this).map(function(b){return b.eval(a)});return Eg(this,b)};function Eg(a,b){return"and"==a.tb?Ed(b):Fd(b)}m.toString=function(){return"combined_pred_"+this.tb.toString()};m.ye=function(){if("or"==this.tb){var a=new xd;K(this).forEach(function(b){b=b.ye().ta();a.add(b)});return a}return new xd};m.pd=function(){return"or"==this.tb?Fg(this):!1};
function Fg(a){var b=null;return K(a).every(function(a){if(!(a instanceof ee&&a.pd()))return!1;null===b&&(b=a.J);return b.m()==a.J.m()})};function Gg(a,b,c){ce.call(this);this.ja=a;this.pa=b;this.F=c;this.fe=null;a=Ud();this.Ac=Vd(a,this.ja.L(),this.F);this.qg=a.af.get(this.ja.L())||null}t(Gg,ce);m=Gg.prototype;m.Rb=function(){var a=new Gg(this.ja,this.pa,this.F),b=this.aa();a.ua=b;return a};m.pb=function(a){return null!=a?(a.push(this.ja),a.push(this.pa),a):[this.ja,this.pa]};m.w=function(a){a=null!=a?a:C();a.add(this.ja.K());a.add(this.pa.K());return a};
m.reverse=function(){var a=this.F;switch(this.F){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new Gg(this.pa,this.ja,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=I(a,this.ja);a=I(a,this.pa);return this.Ac(b,a)},this);return new H(b,a.w())};m.toString=function(){return"join_pred("+this.ja.m()+" "+this.F+" "+this.pa.m()+")"};
function Hg(a,b,c){var d=null,e=null;-1!=b.w().indexOf(Jd(a.ja.K()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.ja;a.ja=a.pa;a.pa=b;b=a.F;switch(a.F){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.F=b;a.Ac=Vd(Ud(),a.ja.L(),a.F)}return[e,d]}return[d,e]}function Ig(a){var b={};a.pb().forEach(function(a){b[a.getName()]=null});return b}
function Jg(a,b,c){null===a.fe&&(a.fe=Ig(a.pa.K()));var d=new Hd(new Xb(-1,a.fe),!1);return Ld(b,c,d,[Jd(a.pa.K())])}
function Kg(a,b,c,d){var e=[b,c];d||(e=Hg(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.ja,k=a.pa;d&&(e=c,f=b,h=a.pa,k=a.ja);var n=new Sc,B=[];e.entries.forEach(function(a){var b=String(I(a,h));n.set(b,a)});var O=e.w(),ea=f.w();f.entries.forEach(function(a){var b=I(a,k),c=String(b);null!==b&&n.has(c)?n.get(c).forEach(function(b){b=Ld(a,ea,b,O);B.push(b)}):d&&B.push(Jg(this,a,ea))}.bind(a));a=b.w().concat(c.w());return new H(B,a)}
function Lg(a,b,c,d,e){function f(a,b){var c=new Hd(b,1<O.length),c=Ld(a,ea,c,O);B.push(c)}var h=d.gg.K(),k=b,n=c;-1!=b.w().indexOf(Jd(h))&&(k=c,n=b);var B=[],O=n.w(),ea=k.w();k.entries.forEach(function(a){var b=this.qg(I(a,d.zg)),b=d.index.get(b);0!=b.length&&(d.index.Na()?f(a,e.get(b[0])):tf(e,b).forEach(f.bind(null,a)))},a);a=k.w().concat(n.w());return new H(B,a)};function Mg(a,b,c){return null===b?new ee(a,b,c):q(b.m)?new Gg(a,b,c):new ee(a,b,c)};var Ng={};r("lf.schema.DataStoreType",Ng);Ng.INDEXED_DB=0;Ng.MEMORY=1;Ng.LOCAL_STORAGE=2;Ng.FIREBASE=3;Ng.WEB_SQL=4;Ng.OBSERVABLE_STORE=5;function Og(a,b,c,d){this.rc=a;this.name=b;this.Ic=c;this.h=d}Og.prototype.m=function(){return this.rc+"."+this.name};function sg(a){return a.h.some(function(a){return a.da.mc()})}function R(a,b,c,d){this.C=a;this.va=c;this.M=b;this.vd=d;this.lb=null}r("lf.schema.Table",R);R.prototype.getName=g("C");R.prototype.getName=R.prototype.getName;R.prototype.cb=g("lb");
function Jd(a){return a.lb||a.C}R.prototype.wc=function(a){var b=new this.constructor(this.C);b.lb=a;b.Lg=this.Lg;return b};R.prototype.as=R.prototype.wc;R.prototype.createRow=R.prototype.Bb;R.prototype.deserializeRow=R.prototype.ob;R.prototype.Fa=g("va");R.prototype.getIndices=R.prototype.Fa;R.prototype.pb=g("M");R.prototype.getColumns=R.prototype.pb;R.prototype.getConstraint=R.prototype.Lb;R.prototype.Hb=g("vd");R.prototype.persistentIndex=R.prototype.Hb;function af(a){return a.C+".#"};function S(a,b){this.child=a;this.Qb=b;this.lb=null}m=S.prototype;m.getName=function(){return this.Qb+"("+this.child.getName()+")"};m.m=function(){return this.Qb+"("+this.child.m()+")"};m.K=function(){return this.child.K()};m.toString=function(){return this.m()};m.L=function(){return this.child.L()};m.cb=g("lb");m.Fa=function(){return[]};m.Ea=l(null);m.mc=l(!1);m.wc=function(a){this.lb=a;return this};S.prototype.as=S.prototype.wc;
function Pg(a){for(var b=[a];a instanceof S;)b.push(a.child),a=a.child;return b}function Qg(a){this.lb=a||null;this.V=new R("#UnknownTable",[],[],!1)}m=Qg.prototype;m.getName=l("*");m.m=function(){return this.getName()};m.toString=function(){return this.m()};m.K=g("V");m.L=l(4);m.cb=g("lb");m.Fa=function(){return[]};m.Ea=l(null);m.mc=l(!1);r("lf.fn.avg",function(a){return new S(a,"AVG")});function Rg(a){return new S(a||new Qg,"COUNT")}r("lf.fn.count",Rg);function Sg(a){return new S(a,"DISTINCT")}r("lf.fn.distinct",Sg);r("lf.fn.max",function(a){return new S(a,"MAX")});r("lf.fn.min",function(a){return new S(a,"MIN")});r("lf.fn.stddev",function(a){return new S(a,"STDDEV")});r("lf.fn.sum",function(a){return new S(a,"SUM")});r("lf.fn.geomean",function(a){return new S(a,"GEOMEAN")});function T(a,b){J.call(this);this.Yf=b}t(T,J);T.prototype.exec=function(a,b){switch(this.Yf){case 1:return Tg(this,a,b);case 0:return Ug(this,a,b);default:return Vg(this,a,b)}};T.prototype.toString=l("dummy_node");T.prototype.Tc=function(){return this.toString()};function Vg(a,b,c){return new v(function(a){a(this.ea([],b,c))}.bind(a))}function Tg(a,b,c){return Yd(a,0).exec(b,c).then(function(a){return this.ea(a,b,c)}.bind(a))}
function Ug(a,b,c){var d=K(a).map(function(a){return a.exec(b,c)});return eb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.ea(d,b,c)}.bind(a))};function Wg(a){T.call(this,0,1);this.Fe=a}t(Wg,T);Wg.prototype.toString=function(){return"aggregation("+this.Fe.map(function(a){return a.m()}).toString()+")"};Wg.prototype.ea=function(a){a.forEach(function(a){Xg(new Yg(a,this.Fe))},this);return a};function Yg(a,b){this.Oa=a;this.M=b}
function Xg(a){a.M.forEach(function(a){a=Pg(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=Pg(d).slice(-1)[0],f=d.child instanceof S?Bd(this.Oa,d.child):this.Oa;if(null!==f.bb&&f.bb.has(d.m()))break;f=Zg(d.Qb,f,e);e=this.Oa;null===e.bb&&(e.bb=y());e.bb.set(d.m(),f)}},a)}
function Zg(a,b,c){var d=null;switch(a){case "MIN":d=$g(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=$g(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=ah(b,c);break;case "COUNT":d=bh(b,c);break;case "SUM":d=ch(b,c);break;case "AVG":a=bh(b,c);0<a&&(d=ch(b,c)/a);break;case "GEOMEAN":d=dh(b,c);break;default:d=eh(b,c)}return d}function $g(a,b,c){return a.entries.reduce(function(a,e){var f=I(e,b);return null===f?a:null===a?f:c(a,f)},null)}
function bh(a,b){return b instanceof Qg?a.entries.length:a.entries.reduce(function(a,d){return a+(fa(I(d,b))?0:1)},0)}function ch(a,b){return $g(a,b,function(a,b){return b+a})}function eh(a,b){var c=[];a.entries.forEach(function(a){a=I(a,b);null===a||c.push(a)});return 0==c.length?null:ub.apply(null,c)}function dh(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=I(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}
function ah(a,b){var c=y();a.entries.forEach(function(a){var e=I(a,b);c.set(e,a)});return new H(z(c),a.w())};function fh(a,b){this.Ja=a;this.ba=b}fh.prototype.eb=g("Ja");fh.prototype.fa=g("ba");function gh(){J.call(this)}t(gh,J);function hh(a,b){J.call(this);this.table=a;this.values=b}t(hh,gh);function ih(a,b){hh.call(this,a,b)}t(ih,hh);function jh(a){J.call(this);this.table=a}t(jh,gh);jh.prototype.toString=function(){return"delete("+this.table.getName()+")"};function kh(a,b){J.call(this);this.table=a;this.Ae=b}t(kh,gh);
kh.prototype.toString=function(){var a=[];this.Ae&&(a=this.Ae.map(function(a){return a.J.getName()},this));return"update("+this.table.getName()+", ["+a.join(",")+"])"};function lh(a){J.call(this);this.Y=a}t(lh,gh);lh.prototype.toString=function(){return"select("+this.Y.toString()+")"};function mh(a){J.call(this);this.table=a}t(mh,gh);mh.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.cb()||(a+=" as "+this.table.cb());return a+")"};
function nh(){J.call(this)}t(nh,gh);nh.prototype.toString=l("cross_product");function oh(a,b){J.call(this);this.h=a;this.Tb=b}t(oh,gh);oh.prototype.toString=function(){var a="project("+this.h.toString();if(null!==this.Tb)var b=this.Tb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function ph(a){J.call(this);this.S=a}t(ph,gh);ph.prototype.toString=function(){return"order_by("+pe(this.S)+")"};function qh(a){J.call(this);this.h=a}t(qh,gh);
qh.prototype.toString=function(){return"aggregation("+this.h.toString()+")"};function rh(a){J.call(this);this.h=a}t(rh,gh);rh.prototype.toString=function(){return"group_by("+this.h.toString()+")"};function sh(a){J.call(this);this.X=a}t(sh,gh);sh.prototype.toString=function(){return"limit("+this.X+")"};function th(a){J.call(this);this.N=a}t(th,gh);th.prototype.toString=function(){return"skip("+this.N+")"};function uh(a,b){J.call(this);this.Y=a;this.Vb=b}t(uh,gh);
uh.prototype.toString=function(){return"join(type: "+(this.Vb?"outer":"inner")+", "+this.Y.toString()+")"};function vh(){};function wh(){}t(wh,vh);wh.prototype.ib=function(a){this.I=a;this.ab(this.I);return this.I};wh.prototype.ab=function(a){if(a instanceof lh){var b=xh(this,a.Y),b=yh(this,b);Bg(a,a,b[0],b[1]);a==this.I&&(this.I=b[0]);a=b[0]}K(a).forEach(function(a){this.ab(a)},this)};function xh(a,b){if(0==K(b).length||"and"!=b.tb)return[b];var c=K(b).slice().map(function(a){b.removeChild(a);return xh(this,a)},a);return Ea(c)}
function yh(a,b){var c=null,d=null;b.map(function(a,b){var h=new lh(a);0==b?c=h:L(d,h);d=h},a);return[c,d]};function zh(){}t(zh,vh);zh.prototype.ib=function(a,b){if(3>b.c.length)return a;this.I=a;this.ab(this.I);return this.I};zh.prototype.ab=function(a){if(a instanceof nh)for(;2<K(a).length;){for(var b=new nh,c=0;2>c;c++){var d=$d(a,0);L(b,d)}Zd(a,b,0)}K(a).forEach(function(a){this.ab(a)},this)};function Ah(){T.call(this,0,0)}t(Ah,T);Ah.prototype.toString=l("cross_product");Ah.prototype.ea=function(a){var b=a[0],c=a[1];a=[];for(var d=b.w(),e=c.w(),f=0;f<b.entries.length;f++)for(var h=0;h<c.entries.length;h++){var k=Ld(b.entries[f],d,c.entries[h],e);a.push(k)}b=b.w().concat(c.w());return[new H(a,b)]};function Bh(a,b){se.call(this,a,b);this.Ka=a.f(pc);this.Nb=a.f(qc)}t(Bh,se);Bh.prototype.getPriority=l(2);Bh.prototype.ie=function(a){0==this.L()?Ch(this,a):this.Qc()};function Ch(a,b){a.wd.forEach(function(a,d){a instanceof oe&&ve(this.Nb,a,b[d])},a)}Bh.prototype.Qc=function(){var a=xe(this.Nb,this.fa());0!=a.length&&(a=new ue(this.global,a),ye(this.Ka,a))};function Dh(a){ie.call(this,a)}t(Dh,ie);Dh.prototype.fa=function(){var a=C();a.add(this.c);Eh(this,this.c.getName(),a);return a};function Eh(a,b,c){var d=Fh(a.da.info(),b,1);Fh(a.da.info(),b).forEach(c.add.bind(c));d.forEach(function(a){Eh(this,a.getName(),c)},a)}Dh.prototype.clone=function(){var a=new Dh(this.da);le(a,this);a.c=this.c;return a};Dh.prototype.bind=function(a){Dh.jb.bind.call(this,a);me(this,a);return this};function Gh(a){ie.call(this,a)}t(Gh,ie);Gh.prototype.fa=function(){var a=C();a.add(this.Ma);var b=this.da.info();Hh(this.Ma.getName(),b.jf).forEach(a.add.bind(a));this.ec&&Fh(b,this.Ma.getName()).forEach(a.add.bind(a));return a};Gh.prototype.clone=function(){var a=new Gh(this.da);le(a,this);a.Ma=this.Ma;this.values&&(a.values=this.values instanceof Md?this.values:this.values.slice());a.ec=this.ec;a.fc=this.fc;return a};
Gh.prototype.bind=function(a){Gh.jb.bind.call(this,a);this.fc&&(this.values=this.fc instanceof Md?a[this.fc.Ea()]:this.fc.map(function(b){return b instanceof Md?a[b.Ea()]:b}));return this};function Ih(a){ie.call(this,a)}t(Ih,ie);Ih.prototype.fa=function(){var a=C();a.add(this.table);var b=this.set.map(function(a){return a.J.m()}),c=this.da.info();Jh(c,b).forEach(a.add.bind(a));Kh(c,b).forEach(a.add.bind(a));return a};Ih.prototype.clone=function(){var a=new Ih(this.da);le(a,this);a.table=this.table;a.set=this.set?this.set.slice():this.set;return a};Ih.prototype.bind=function(a){Ih.jb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Xc&&(b.value=a[b.Xc])});me(this,a);return this};function Lh(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+ac(b)+"'";default:return"'"+b.toString()+"'"}}function Mh(a,b){var c=a.ec?"INSERT OR REPLACE":"INSERT",d=a.Ma.pb(),c=c+(" INTO "+a.Ma.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var f=d.map(function(c){var d=a.s[c.getName()];return b?null!=d?"#":"NULL":Lh(c.L(),d)});return c+f.join(", ")+");"}).join("\n")}
function Nh(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Oh(a,b,c,d){return a instanceof Md?"?"+a.Ea().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return Lh(c,a)}).join(", ")+")":"between"==b?Lh(c,a[0])+" AND "+Lh(c,a[1]):Lh(c,a).toString()}
function Ph(a,b){return K(a).map(function(a){return"("+Qh(a,b)+")"}).join("and"==a.tb?" AND ":" OR ")}function Rh(a){return[a.ja.m(),Nh(a.F),a.pa.m()].join(" ")}function Qh(a,b){if(a instanceof ee){var c=a.J.m(),d=Nh(a.F),e=Oh(a.value,a.F,a.J.L(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof Dg)return Ph(a,b);if(a instanceof Gg)return Rh(a);throw new E(357,typeof a);}
function Sh(a,b){var c=Qh(a,b);return c?" WHERE "+c:""}function Th(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.J.m()+" = ";return-1!=a.Xc?b+"?"+a.Xc.toString():b+Lh(a.J.L(),a.value).toString()}).join(", ");a.B&&(c+=Sh(a.B,b));return c+";"}
function Uh(a,b){var c="*";a.h.length&&(c=a.h.map(function(a){return a.cb()?a.m()+" AS "+a.cb():a.m()}).join(", "));c="SELECT "+c+" FROM ";null!=a.Gb&&0!=a.Gb.size?c+=Vh(a,b):(c+=a.c.map(Wh).join(", "),a.B&&(c+=Sh(a.B,b)));if(a.S)var d=a.S.map(function(a){return a.J.m()+(0==a.ub?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.na&&(d=a.na.map(function(a){return a.m()}).join(", "),c+=" GROUP BY "+d);a.X&&(c+=" LIMIT "+a.X.toString());a.N&&(c+=" SKIP "+a.N.toString());return c+";"}
function Wh(a){return Jd(a)!=a.getName()?a.getName()+" AS "+Jd(a):a.getName()}function Vh(a,b){for(var c=wg(a.B,function(a){return a instanceof Gg}),d=c.map(Rh),e=Wh(a.c[0]),f=1;f<a.c.length;f++)var h=Wh(a.c[f]),e=a.Gb.has(c[d.length-f].aa())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");c=Yd(a.B,0);c instanceof Gg||(e+=" WHERE "+Qh(c,b));return e}
function Xh(a,b){var c=b||!1,d=a.a.clone();if(d instanceof Gh)return Mh(d,c);if(d instanceof Dh){var e="DELETE FROM "+d.c.getName();d.B&&(e+=Sh(d.B,c));return e+";"}if(d instanceof Ih)return Th(d,c);if(d instanceof oe)return Uh(d,c);throw new E(358,typeof d);};function U(a,b){this.global=a;this.Kg=a.f(oc);this.Ka=a.f(pc);this.a=b}r("lf.query.BaseBuilder",U);U.prototype.exec=function(){try{this.mb()}catch(a){return bb(a)}return new v(function(a,b){var c=new Bh(this.global,[this.Gc()]);ye(this.Ka,c).then(function(b){a(zd(b[0]))},b)},this)};U.prototype.exec=U.prototype.exec;U.prototype.$f=function(){var a=function(a){return a.Tc(this.a)+"\n"}.bind(this);return Cg(Yh(this).eb(),a)};U.prototype.explain=U.prototype.$f;
U.prototype.bind=function(a){this.a.bind(a);return this};U.prototype.bind=U.prototype.bind;U.prototype.Sg=function(a){return Xh(this,a)};U.prototype.toSql=U.prototype.Sg;U.prototype.mb=aa();function Yh(a){if(null==a.kf){var b;b=a.Kg;var c=a.a,d=b.tg.create(c);b=b.Hg.create(d,c);a.kf=b}return a.kf}U.prototype.Gc=function(){return{context:this.a.clone(),le:Yh(this)}};function Zh(a){U.call(this,a,new Dh(a.f(rc)))}t(Zh,U);r("lf.query.DeleteBuilder",Zh);Zh.prototype.c=function(a){if(null!=this.a.c)throw new E(515);this.a.c=a;return this};Zh.prototype.from=Zh.prototype.c;Zh.prototype.B=function(a){this.Id();this.a.B=a;return this};Zh.prototype.where=Zh.prototype.B;Zh.prototype.Id=function(){if(null==this.a.c)throw new E(548);if(null!=this.a.B)throw new E(516);};Zh.prototype.mb=function(){Zh.jb.mb.call(this);if(null==this.a.c)throw new E(517);};function $h(a,b){U.call(this,a,new Gh(a.f(rc)));this.a.ec=b||!1}t($h,U);r("lf.query.InsertBuilder",$h);$h.prototype.mb=function(){$h.jb.mb.call(this);var a=this.a;if(null==a.Ma||null==a.values)throw new E(518);if(a.ec&&null===a.Ma.Lb().fd())throw new E(519);};$h.prototype.Ma=function(a){if(null!=this.a.Ma)throw new E(520);this.a.Ma=a;return this};$h.prototype.into=$h.prototype.Ma;
$h.prototype.values=function(a){if(null!=this.a.values)throw new E(521);a instanceof Md||a.some(function(a){return a instanceof Md})?this.a.fc=a:this.a.values=a;return this};$h.prototype.values=$h.prototype.values;function ai(a){return bi("and",Array.prototype.slice.call(arguments))}r("lf.op.and",ai);r("lf.op.or",function(a){return bi("or",Array.prototype.slice.call(arguments))});function bi(a,b){var c=new Dg(a);b.forEach(function(a){L(c,a)});return c}r("lf.op.not",function(a){a.yd(!0);return a});function V(a,b){U.call(this,a,new oe(a.f(rc)));this.Pe=this.Dd=!1;this.a.h=b;ci(this);di(this)}t(V,U);r("lf.query.SelectBuilder",V);V.prototype.mb=function(){V.jb.mb.call(this);var a=this.a;if(null==a.c)throw new E(522);if(q(a.Wb)&&!q(a.X)||q(a.cc)&&!q(a.N))throw new E(523);null!=this.a.na?ei(this):fi(this)};function ci(a){var b=a.a.h.filter(function(a){return a instanceof S&&"DISTINCT"==a.Qb},a);if(0!=b.length&&(1!=b.length||1!=a.a.h.length))throw new E(524);}
function ei(a){var b=a.a.h.filter(function(a){return!(a instanceof S)}).map(function(a){return a.m()}),c=!1;if(0==a.a.na.length||0==a.a.h.length)c=!0;else{var d=a.a.na.map(function(a){return a.m()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.a.na.some(function(a){a=a.L();return 6==a||0==a}))}if(c)throw new E(525);}function fi(a){var b=a.a.h.some(function(a){return a instanceof S},a);a=a.a.h.some(function(a){return!(a instanceof S)},a)||0==a.a.h.length;if(b&&a)throw new E(526);}
function di(a){a.a.h.forEach(function(a){if(a instanceof S&&!gi(a.Qb,a.L()))throw new E(527,a.m());},a)}function hi(a,b){if(null==a.a.c)throw new E(b);}V.prototype.c=function(a){if(this.Pe)throw new E(515);this.Pe=!0;null==this.a.c&&(this.a.c=[]);this.a.c.push.apply(this.a.c,Array.prototype.slice.call(arguments));return this};V.prototype.from=V.prototype.c;V.prototype.B=function(a){hi(this,548);if(this.Dd)throw new E(516);this.Dd=!0;ii(this,a);return this};V.prototype.where=V.prototype.B;
function ii(a,b){if(null!=a.a.B){var c=ai(b,a.a.B);a.a.B=c}else a.a.B=b}V.prototype.kg=function(a,b){hi(this,542);if(this.Dd)throw new E(547);this.a.c.push(a);ii(this,b);return this};V.prototype.innerJoin=V.prototype.kg;V.prototype.rg=function(a,b){hi(this,542);if(!(b instanceof Gg))throw new E(541);if(this.Dd)throw new E(547);this.a.c.push(a);null==this.a.Gb&&(this.a.Gb=C());var c=b;Jd(a)!=Jd(b.pa.K())&&(c=b.reverse());this.a.Gb.add(c.aa());ii(this,c);return this};V.prototype.leftOuterJoin=V.prototype.rg;
V.prototype.X=function(a){if(null!=(this.a.X||this.a.Wb))throw new E(528);if(a instanceof Md)this.a.Wb=a;else{if(0>a)throw new E(531);this.a.X=a}return this};V.prototype.limit=V.prototype.X;V.prototype.N=function(a){if(null!=(this.a.N||this.a.cc))throw new E(529);if(a instanceof Md)this.a.cc=a;else{if(0>a)throw new E(531);this.a.N=a}return this};V.prototype.skip=V.prototype.N;V.prototype.S=function(a,b){hi(this,549);null==this.a.S&&(this.a.S=[]);this.a.S.push({J:a,ub:null!=b?b:1});return this};
V.prototype.orderBy=V.prototype.S;V.prototype.na=function(a){hi(this,549);if(null!=this.a.na)throw new E(530);null==this.a.na&&(this.a.na=[]);this.a.na.push.apply(this.a.na,Array.prototype.slice.call(arguments));return this};V.prototype.groupBy=V.prototype.na;function gi(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}
V.prototype.clone=function(){var a=new V(this.global,this.a.h);a.a=this.a.clone();a.a.$c=null;return a};V.prototype.clone=V.prototype.clone;function ji(a,b){U.call(this,a,new Ih(a.f(rc)));this.a.table=b}t(ji,U);r("lf.query.UpdateBuilder",ji);ji.prototype.set=function(a,b){var c={Xc:b instanceof Md?b.Ea():-1,J:a,value:b};null!=this.a.set?this.a.set.push(c):this.a.set=[c];return this};ji.prototype.set=ji.prototype.set;ji.prototype.B=function(a){this.Id();this.a.B=a;return this};ji.prototype.where=ji.prototype.B;ji.prototype.Id=function(){if(null!=this.a.B)throw new E(516);};
ji.prototype.mb=function(){ji.jb.mb.call(this);if(null==this.a.set)throw new E(532);if(this.a.set.some(function(a){return a.value instanceof Md}))throw new E(501);};function ki(a){this.a=a;this.Ja=null}ki.prototype.lc=function(){null===this.Ja&&(this.Ja=this.dd());return this.Ja};function li(a){ki.call(this,a)}t(li,ki);li.prototype.dd=function(){return this.a.ec?new ih(this.a.Ma,this.a.values):new hh(this.a.Ma,this.a.values)};function mi(a){ki.call(this,a)}t(mi,ki);mi.prototype.dd=function(){var a=new kh(this.a.table,this.a.set),b=null!=this.a.B?new lh(this.a.B.Rb()):null,c=new mh(this.a.table);null===b?L(a,c):(L(b,c),L(a,b));return a};function ni(a,b,c){this.Ja=a;this.me=b;this.Zb=c}ni.prototype.lc=function(){this.Zb.forEach(function(a){this.Ja=a.ib(this.Ja,this.me)},this);return this.Ja};function oi(a,b){ki.call(this,a);this.Zb=b}t(oi,ki);oi.prototype.dd=function(){var a=new jh(this.a.c),b=null!=this.a.B?new lh(this.a.B.Rb()):null,c=new mh(this.a.c);null===b?L(a,c):(L(b,c),L(a,b));return(new ni(a,this.a,this.Zb)).lc()};function pi(){}t(pi,vh);pi.prototype.ib=function(a,b){if(2>b.c.length)return a;this.I=a;this.ab(this.I,b);return this.I};pi.prototype.ab=function(a,b){if(a instanceof lh&&a.Y instanceof Gg){var c=a.Y.aa(),d=Yd(a,0);d instanceof nh&&(c=null!=b.Gb&&b.Gb.has(c),c=new uh(a.Y,c),Bg(a,d,c,c),a==this.I&&(this.I=c),a=c)}K(a).forEach(function(a){this.ab(a,b)},this)};function qi(){this.Wc=C()}t(qi,vh);qi.prototype.ib=function(a,b){if(!q(b.B))return a;this.Wc.clear();this.I=a;this.ab(this.I);this.Wc.clear();return this.I};qi.prototype.ab=function(a){if(a instanceof lh){var b=a.Y.w(),c=function(a){return ri(this,a,b)}.bind(this),c=si(this,a,c);this.Wc.add(a);c==a&&(c=Yd(a,0));null!==c&&(fa(c.getParent())&&(this.I=c),c instanceof lh&&!this.Wc.has(c)&&this.ab(c))}else K(a).forEach(function(a){this.ab(a)},this)};
function si(a,b,c){var d=b;if(Yd(b,0)instanceof lh)d=zg(b),si(a,b,c);else if(ti(b)){var e=[],d=Ag(b,c,function(a){a=new lh(a.Y);e.push(a);return a});e.forEach(function(a){si(this,a,c)},a)}return d}function ri(a,b,c){var d=C();vg(b).forEach(function(a){d.add(a.table)},a);b instanceof mh&&d.add(b.table);return xc(d,c)}function ti(a){a=Yd(a,0);return a instanceof nh||a instanceof uh};function ui(a,b){ki.call(this,a);this.Zb=b;this.of=this.ef=this.wf=this.hf=this.Ge=this.Ue=this.vf=this.Me=this.yf=null}t(ui,ki);
ui.prototype.dd=function(){vi(this);2<=this.a.c.length&&(this.Me=new nh);this.vf=null!=this.a.B?new lh(this.a.B.Rb()):null;this.a.S&&(this.hf=new ph(this.a.S));null!=this.a.N&&0<this.a.N&&(this.wf=new th(this.a.N));null!=this.a.X&&(this.ef=new sh(this.a.X));null!=this.a.na&&(this.Ue=new rh(this.a.na));wi(this);this.of=new oh(this.a.h||[],this.a.na||null);var a=xi(this);return(new ni(a,this.a,this.Zb)).lc()};
function xi(a){for(var b=[a.ef,a.wf,a.of,a.hf,a.Ge,a.Ue,a.vf,a.Me],c=null,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:L(b[c],f),c=e)}a.yf.forEach(function(a){L(b[c],a)});return d}function vi(a){a.yf=a.a.c.map(function(a){return new mh(a)},a)}function wi(a){var b=a.a.h.filter(function(a){return a instanceof S});null!=a.a.S&&a.a.S.forEach(function(a){a.J instanceof S&&b.push(a.J)});0<b.length&&(a.Ge=new qh(b))};function yi(){this.te=[new wh,new zh,new qi,new pi];this.Sd=[new wh]}yi.prototype.create=function(a){var b=null;if(a instanceof Gh)b=new li(a);else if(a instanceof Dh)b=new oi(a,this.Sd);else if(a instanceof oe)b=new ui(a,this.te);else if(a instanceof Ih)b=new mi(a);else throw new E(513);b=b.lc();return new fh(b,a.fa())};function zi(a){T.call(this,0,1);this.V=a}t(zi,T);zi.prototype.toString=function(){return"delete("+this.V.getName()+")"};zi.prototype.ea=function(a,b){var c=a[0].entries.map(function(a){return a.xa});b.remove(this.V,c);return[Dd()]};function Ai(a,b){T.call(this,0,-1);this.table=b;this.G=a.f(nc)}t(Ai,T);Ai.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};Ai.prototype.ea=function(){var a=this.G.get(af(this.table)),b=new H([],[this.table.getName()]),c=Rg(),a=a.ca().ka;null===b.bb&&(b.bb=y());b.bb.set(c.m(),a);return[b]};function Bi(a,b){T.call(this,0,-1);this.W=a.f(mc);this.G=a.f(nc);this.table=b}t(Bi,T);Bi.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.cb()||(a+=" as "+this.table.cb());return a+")"};Bi.prototype.ea=function(){var a=this.G.get(af(this.table)).Wa();return[Gd(tf(this.W,a),[Jd(this.table)])]};function Ci(a){this.g=a}t(Ci,vh);Ci.prototype.ib=function(a,b){this.I=a;if(!this.Kd(b))return a;var c=wg(a,function(a){return a instanceof Bi})[0],d=new Ai(this.g,c.table);Bg(c,c,d,d);return this.I};Ci.prototype.Kd=function(a){return 1==a.h.length&&1==a.c.length&&null==a.B&&null==a.X&&null==a.N&&null==a.na?(a=a.h[0],a instanceof S&&"COUNT"==a.Qb&&a.child instanceof Qg):!1};function Di(a){T.call(this,0,1);this.Te=a}t(Di,T);Di.prototype.toString=function(){return"groupBy("+this.Te.map(function(a){return a.m()}).toString()+")"};Di.prototype.ea=function(a){return Ei(this,a[0])};function Ei(a,b){var c=new Sc,d=function(a){return this.Te.map(function(b){return I(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new H(c.get(a),b.w())},a)};function Fi(a,b,c){T.call(this,0,0);this.G=a.f(nc);this.W=a.f(mc);this.Y=b;this.Vb=c;this.Gd="eq"==this.Y.F?0:2;this.We=null}t(Fi,T);var Gi=["hash","index_nested_loop","nested_loop"];Fi.prototype.toString=function(){return"join(type: "+(this.Vb?"outer":"inner")+", impl: "+Gi[this.Gd]+", "+this.Y.toString()+")"};
Fi.prototype.ea=function(a){switch(this.Gd){case 0:return[Kg(this.Y,a[0],a[1],this.Vb)];case 1:return[Lg(this.Y,a[0],a[1],this.We,this.W)];default:var b=this.Y,c=a[0];a=a[1];var d=this.Vb,e=[c,a];d||(e=Hg(b,c,a));c=e[0];a=e[1];for(var e=[],f=c.w(),h=a.w(),k=c.entries.length,n=a.entries.length,B=n+256-1>>8,O=0;O<B;){for(var ea=0;ea<k;ea++){var Bb=!1,bg=I(c.entries[ea],b.ja);if(null!==bg)for(var ec=Math.min(O+1<<8,n),Cb=O<<8;Cb<ec;Cb++)if(b.Ac(bg,I(a.entries[Cb],b.pa))){var Bb=!0,Uc=Ld(c.entries[ea],
f,a.entries[Cb],h);e.push(Uc)}d&&!Bb&&e.push(Jg(b,c.entries[ea],f))}O++}b=c.w().concat(a.w());return[new H(e,b)]}};function Hi(a,b){a.Gd=1;var c=a.G.get(b.Ea().m());a.We={gg:b,zg:b==a.Y.ja?a.Y.pa:a.Y.ja,index:c}};function Ii(a){T.call(this,0,-1);this.pf=a}t(Ii,T);Ii.prototype.toString=function(){return"no_op_step("+this.pf[0].w().join(",")+")"};Ii.prototype.ea=g("pf");function Ji(){}t(Ji,vh);Ji.prototype.ib=function(a,b){this.I=a;if(!this.Kd(b))return a;wg(a,function(a){return a instanceof Fi}).forEach(this.Jg,this);return this.I};Ji.prototype.Kd=function(a){return 1<a.c.length};
Ji.prototype.Jg=function(a){if("eq"==a.Y.F&&!a.Vb){var b=function(b){if(!(b instanceof Bi))return null;b=Jd(b.table)==Jd(a.Y.pa.K())?a.Y.pa:a.Y.ja;return fa(b.Ea())?null:b},c=b(Yd(a,0)),b=b(Yd(a,1));if(null!==c||null!==b){b=null===b?c:b;Hi(a,b);var d=new H([],[Jd(b.K())]);ae(a,new Ii([d]),b==c?0:1)}}};function Ki(a){a=a.map(function(a){return a.ta()});a=zb.apply(null,a);var b=[];yb(a,function(a){b.push(a)});return b}function Li(a){this.Ub=a}Li.prototype.ed=function(){return 1==this.Ub.h.length?[td()]:[this.Ub.h.map(function(){return td()})]};function Mi(a,b){this.Ub=a;this.Ia=b;this.Od=this.cf=null}
function Ni(a,b){var c=y();a.Ia.keys().forEach(function(a){var e=this.Ia.get(a).map(function(a){return je(b,a)},this),f=new xd([td()]);e.forEach(function(a){f=yd(f,a.ye())});c.set(a,f)},a);return c}Mi.prototype.ed=function(a){if(this.cf==a)return this.Od;for(var b=Ni(this,a),c=this.Ub.h.length-1;0<=c;c--){var d=this.Ub.h[c];if(null!==(b.get(d.da.getName())||null))break;b.set(d.da.getName(),new xd([td()]))}this.Od=1==this.Ub.h.length?z(b)[0].ta():Ki(Oi(this,b));this.cf=a;return this.Od};
function Oi(a,b){var c=y(),d=0;a.Ub.h.forEach(function(a){c.set(a.da.getName(),d);d++});return Wb(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function Pi(a,b){this.Ad=b;this.G=a.f(nc)}function Qi(a){a=a.G.get(af(a.Ad));return Math.floor(.02*a.ca().ka)}function Ri(a,b,c){c=c.filter(a.ng,a);if(0==c.length)return null;a=Si(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=Ti(c,b);return h<d?(d=h,c):a},null)}
function Si(a,b){return a.Ad.Fa().map(function(a){a=new Ui(this.G,a);Vi(a,b);return a},a).filter(function(a){if(null===a.Ia)a=!1;else{for(var b=!1,e=!0,f=0;f<a.fb.h.length;f++){var h=a.Ia.has(a.fb.h[f].da.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}Pi.prototype.ng=function(a){return a instanceof ee?!a.pd()||a.J.K()!=this.Ad||"in"==a.F&&a.value.length>Qi(this)?!1:!0:a instanceof Dg?a.pd()&&Yd(a,0).J.K()==this.Ad?K(a).length<=Qi(this):!1:!1};
function Ui(a,b){this.G=a;this.fb=b;this.hg=C(this.fb.h.map(function(a){return a.da.getName()}));this.ce=this.Ia=null}function Wi(a){null===a.ce&&(a.ce=new Mi(a.fb,a.Ia));return a.ce}function Vi(a,b){b.forEach(function(a){var b=a.pb()[0].getName();this.hg.has(b)&&(null===this.Ia&&(this.Ia=new Sc),this.Ia.set(b,a.aa()))},a)}function Ti(a,b){var c=Wi(a).ed(b),d=a.G.get(a.fb.m());return c.reduce(function(a,b){return a+d.bd(b)},0)};function Xi(a,b,c,d){T.call(this,0,-1);this.G=a.f(nc);this.index=b;this.bf=c;this.qe=d;this.Vc=this.Uc=!1}t(Xi,T);Xi.prototype.toString=function(){return"index_range_scan("+this.index.m()+", ?, "+(this.qe?"reverse":"natural")+(this.Uc?", limit:?":"")+(this.Vc?", skip:?":"")+")"};Xi.prototype.Tc=function(a){var b=this.toString(),c=this.bf.ed(a),b=b.replace("?",c.toString());this.Uc&&(b=b.replace("?",a.X.toString()));this.Vc&&(b=b.replace("?",a.N.toString()));return b};
Xi.prototype.ea=function(a,b,c){a=this.bf.ed(c);b=this.G.get(this.index.m());c=(1==a.length&&a[0]instanceof F&&ud(a[0])?xf(b.get(a[0].c),!1,this.Uc?c.X:void 0,this.Vc?c.N:void 0):b.Wa(a,this.qe,this.Uc?c.X:void 0,this.Vc?c.N:void 0)).map(function(a){return new Xb(a,{})},this);return[Gd(c,[this.index.rc])]};function Yi(){T.call(this,0,0)}t(Yi,T);Yi.prototype.toString=l("multi_index_range_scan()");
Yi.prototype.ea=function(a){var b=y();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.xa.id(),a)})});var c=z(b);return[new H(c,a[0].w())]};function Zi(a){T.call(this,0,1);this.oc=a}t(Zi,T);Zi.prototype.toString=l("select(?)");Zi.prototype.Tc=function(a){a=je(a,this.oc);return this.toString().replace("?",a.toString())};Zi.prototype.ea=function(a,b,c){return[je(c,this.oc).eval(a[0])]};function $i(a,b){T.call(this,0,1);this.W=a.f(mc);this.V=b}t($i,T);$i.prototype.toString=function(){return"table_access_by_row_id("+this.V.getName()+")"};$i.prototype.ea=function(a){return[Gd(tf(this.W,Ad(a[0])),[Jd(this.V)])]};function aj(a){this.g=a}t(aj,vh);aj.prototype.ib=function(a,b){this.I=a;wg(a,function(a){return a instanceof Bi}).forEach(function(a){var d=bj(a);if(0!=d.length){var e=Ri(new Pi(this.g,a.table),b,d.map(function(a){return je(b,a.oc)}));if(null!==e){var f=y();d.forEach(function(a){f.set(a.oc,a)},this);this.I=cj(this,e,f,a)}}},this);return this.I};function bj(a){var b=[];for(a=a.getParent();a;)a instanceof Zi&&b.push(a),a=a.getParent();return b}
function cj(a,b,c,d){(null===b.Ia?[]:b.Ia.values()).map(function(a){return c.get(a)}).forEach(xg);b=new Xi(a.g,b.fb,Wi(b),!1);a=new $i(a.g,d.table);L(a,b);Bg(d,d,a,b);return b.eb()};function dj(a,b){T.call(this,0,-1);this.G=a.f(nc);this.V=b}t(dj,T);dj.prototype.toString=function(){return"insert("+this.V.getName()+")"};dj.prototype.ea=function(a,b,c){ej(this.V,c.values,this.G);b.Eb(this.V,c.values);return[Gd(c.values,[this.V.getName()])]};function ej(a,b,c){a=a.Lb().fd();if(null===a?0:a.h[0].autoIncrement){var d=a.h[0].da.getName();c=c.get(a.m()).max();var e=null===c?0:c[0];b.forEach(function(a){if(0==a.s[d]||null==a.s[d])e++,a.s[d]=e})}}
function fj(a,b){T.call(this,0,-1);this.G=a.f(nc);this.V=b}t(fj,T);fj.prototype.toString=function(){return"insert_replace("+this.V.getName()+")"};fj.prototype.ea=function(a,b,c){ej(this.V,c.values,this.G);b.Zd(this.V,c.values);return[Gd(c.values,[this.V.getName()])]};function gj(){T.call(this,0,1)}t(gj,T);gj.prototype.toString=l("limit(?)");gj.prototype.Tc=function(a){return this.toString().replace("?",a.X.toString())};gj.prototype.ea=function(a,b,c){a[0].entries.splice(c.X);return a};function hj(a){T.call(this,0,1);this.S=a}t(hj,T);m=hj.prototype;m.toString=function(){return"order_by("+pe(this.S)+")"};m.ea=function(a){if(1==a.length){var b;b=a[0];for(var c=null,d=0;d<this.S.length;d++){var e=Sg(this.S[d].J);if(null!==b.bb&&b.bb.has(e.m())){c=e;break}}b=c;(null===b?a[0]:Bd(a[0],b)).entries.sort(this.Xf.bind(this))}else a.sort(this.Mg.bind(this));return a};
m.$=function(a,b){var c=null,d=null,e=null,f=-1;do f++,e=this.S[f].J,c=this.S[f].ub,d=a(e),e=b(e);while(d==e&&f+1<this.S.length);d=d<e?-1:d>e?1:0;return 1==c?d:-d};m.Mg=function(a,b){return this.$(function(b){return b instanceof S?Bd(a,b):I(a.entries[a.entries.length-1],b)},function(a){return a instanceof S?Bd(b,a):I(b.entries[b.entries.length-1],a)})};m.Xf=function(a,b){return this.$(function(b){return I(a,b)},function(a){return I(b,a)})};function ij(a,b){this.Oa=a;this.M=b}function jj(a){return a.M.some(function(a){return a instanceof S},a)?kj(a):lj(a)}function kj(a){if(1==a.M.length&&"DISTINCT"==a.M[0].Qb)return a=Bd(a.Oa,a.M[0]).entries.map(function(a){var b=new Hd(new Xb(-1,{}),1<this.Oa.O.size);Kd(b,this.M[0],I(a,this.M[0].child));return b},a),new H(a,[]);var b=new Hd(new Xb(-1,{}),1<a.Oa.O.size);a.M.forEach(function(a){var d=a instanceof S?Bd(this.Oa,a):I(this.Oa.entries[0],a);Kd(b,a,d)},a);return new H([b],a.Oa.w())}
function lj(a){var b=Array(a.Oa.entries.length),c=1<a.Oa.O.size;a.Oa.entries.forEach(function(a,e){b[e]=new Hd(new Xb(a.xa.id(),{}),c);this.M.forEach(function(c){Kd(b[e],c,I(a,c))},this)},a);return new H(b,a.Oa.w())}function mj(a,b){var c=a.map(function(a){return jj(new ij(a,b)).entries[0]});return new H(c,a[0].w())};function nj(a,b){T.call(this,0,1);this.h=a;this.Tb=b}t(nj,T);nj.prototype.toString=function(){var a="project("+this.h.toString();if(null!==this.Tb)var b=this.Tb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};nj.prototype.ea=function(a){0==a.length?a=[Dd()]:1==a.length?(a=a[0],a=[0==this.h.length?a:jj(new ij(a,this.h))]):a=[mj(a,this.h)];return a};function oj(a){return a.h.some(function(a){return a instanceof S})||null!==a.Tb};function pj(){T.call(this,0,1)}t(pj,T);pj.prototype.toString=l("skip(?)");pj.prototype.Tc=function(a){return this.toString().replace("?",a.N.toString())};pj.prototype.ea=function(a,b,c){return[new H(a[0].entries.slice(c.N),a[0].w())]};function qj(){}t(qj,vh);qj.prototype.ib=function(a,b){if(!q(b.X)&&!q(b.N))return a;var c=rj(a);if(null===c)return a;wg(a,function(a){return a instanceof gj||a instanceof pj}).forEach(function(a){a instanceof gj?c.Uc=!0:c.Vc=!0;xg(a)},this);return c.eb()};function rj(a){a=wg(a,function(a){return a instanceof Xi},function(a){return a instanceof nj&&oj(a)||a instanceof hj||1!=K(a).length||a instanceof Zi});return 0<a.length?a[0]:null};function sj(a){this.g=a}t(sj,vh);sj.prototype.ib=function(a,b){this.I=a;var c=tj(this,b);if(0==c.length)return this.I;var d=null,e=null,f=0;do e=c[f++],d=uj(this,e,b);while(null===d&&f<c.length);return null===d?this.I:this.I=vj(this,e,d)};function tj(a,b){return wg(a.I,function(a){if(!(a instanceof Zi))return!1;a=je(b,a.oc);return a instanceof Dg&&"or"==a.tb})}
function uj(a,b,c){b=je(c,b.oc);var d=b.w();if(1!=d.size)return null;var d=D(d)[0],e=new Pi(a.g,d),f=null;return K(b).every(function(a){a=Ri(e,c,[a]);null===a||(null===f?f=[a]:f.push(a));return null!==a})?f:null}function vj(a,b,c){var d=wg(a.I,function(a){return a instanceof Bi&&a.table.getName()==c[0].fb.rc})[0],e=new $i(a.g,d.table),f=new Yi;L(e,f);c.forEach(function(a){a=new Xi(this.g,a.fb,Wi(a),!1);L(f,a)},a);xg(b);Bg(d,d,e,f);return f.eb()};function wj(a){this.g=a}t(wj,vh);wj.prototype.ib=function(a,b){var c=xj(a,b);if(null===c)return a;var d;a:{var e=c;d=yj(Yd(c,0));if(null!==d){var f;f=c.S;for(var h=null,k=d.table.Fa(),n=0;n<k.length&&null===h;n++)h=zj(k[n],f);f=h;if(null===f){d=e;break a}e=new Xi(this.g,f.fb,new Li(f.fb),f.Ze);f=new $i(this.g,d.table);L(f,e);xg(c);e=Bg(d,d,f,e)}d=e}if(d==c)a:if(d=c,e=Aj(Yd(c,0)),null!==e){f=zj(e.index,c.S);if(null===f)break a;e.qe=f.Ze;d=xg(c).parent}return d.eb()};
function Aj(a){a=wg(a,function(a){return a instanceof Xi},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function yj(a){a=wg(a,function(a){return a instanceof Bi},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function xj(a,b){return q(b.S)?wg(a,function(a){return a instanceof hj})[0]:null}function zj(a,b){if(a.h.length!=b.length||!b.every(function(b,c){return b.J.getName()==a.h[c].da.getName()}))return null;var c=Bj(b,a);return c[0]||c[1]?{fb:a,Ze:c[1]}:null}
function Bj(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.ub?0:1)},0),d=b.h.reduce(function(a,b){return a<<1|(0==b.ub?0:1)},0),c=c^d;return[0==c,c==Math.pow(2,Math.max(a.length,b.h.length))-1]};function Cj(a,b,c){this.Ja=a;this.me=b;this.Zb=c}Cj.prototype.lc=function(){this.Zb.forEach(function(a){this.Ja=a.ib(this.Ja,this.me)},this);return this.Ja};function Dj(a,b){T.call(this,0,1);this.V=a;this.Xg=b}t(Dj,T);Dj.prototype.toString=function(){return"update("+this.V.getName()+")"};Dj.prototype.ea=function(a,b){var c=a[0].entries.map(function(a){var b=this.V.ob(a.xa.La());this.Xg.forEach(function(a){b.s[a.J.getName()]=a.value},this);return b},this);b.update(this.V,c);return[Dd()]};function Ej(a){this.g=a;this.te=[new Ji,new aj(this.g),new sj(this.g),new wj(this.g),new qj,new Ci(this.g)];this.Sd=[new aj(this.g)]}Ej.prototype.create=function(a,b){var c=a.eb();if(c instanceof ih||c instanceof hh)return Fj(this,a,b);if(c instanceof oh||c instanceof sh||c instanceof th)return Fj(this,a,b,this.te);if(c instanceof jh||c instanceof kh)return Fj(this,a,b,this.Sd);throw new E(8);};
function Fj(a,b,c,d){a=ug(b.eb(),a.wg.bind(a));null!=d&&(a=(new Cj(a,c,d)).lc());return new qe(a,b.fa())}
Ej.prototype.wg=function(a){if(a instanceof oh)return new nj(a.h,a.Tb);if(a instanceof rh)return new Di(a.h);if(a instanceof qh)return new Wg(a.h);if(a instanceof ph)return new hj(a.S);if(a instanceof th)return new pj;if(a instanceof sh)return new gj;if(a instanceof lh)return new Zi(a.Y.aa());if(a instanceof nh)return new Ah;if(a instanceof uh)return new Fi(this.g,a.Y,a.Vb);if(a instanceof mh)return new Bi(this.g,a.table);if(a instanceof jh)return new zi(a.table);if(a instanceof kh)return new Dj(a.table,
a.Ae);if(a instanceof ih)return new fj(this.g,a.table);if(a instanceof hh)return new dj(this.g,a.table);throw new E(514);};function Gj(a){this.tg=new yi;this.Hg=new Ej(a)};function Hj(){this.ff=y()}function Ij(a,b){var c=a.ff.get(b.getName())||null;null===c&&(c=new Jj,a.ff.set(b.getName(),c));return c}function Kj(a,b,c,d){c.forEach(function(a){a=Ij(this,a);0==d?(a.gb=null,a.Bc=b):3==d?(null===a.bc&&(a.bc=C()),a.bc.add(b),null===a.Za&&(a.Za=C()),a.Za.delete(b)):1==d?(null===a.Za&&(a.Za=C()),a.Za.add(b)):2==d&&(a.gb=b)},a)}
function Lj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=Ij(this,a);var c=null===a.Za||0==a.Za.size;e=0==d?(null===a.bc||0==a.bc.size)&&c&&null===a.Bc&&null!==a.gb&&a.gb==b:3==d?null===a.Bc&&null===a.gb&&null!==a.Za&&a.Za.has(b):1==d?null===a.gb:c&&(null===a.gb||a.gb==b)}},a);return e}function Mj(a,b,c,d){var e=Lj(a,b,c,d);e&&Kj(a,b,c,d);return e}Hj.prototype.releaseLock=function(a,b){b.forEach(function(b){Ij(this,b).releaseLock(a)},this)};
function Nj(a,b){b.forEach(function(a){Ij(this,a).gb=null},a)}function Jj(){this.bc=this.Za=this.gb=this.Bc=null}Jj.prototype.releaseLock=function(a){this.Bc==a&&(this.Bc=null);this.gb==a&&(this.gb=null);null===this.Za||this.Za.delete(a);null===this.bc||this.bc.delete(a)};function Oj(){this.Yb=new Pj;this.Jc=new Hj}function ye(a,b){(2>b.getPriority()||2>b.getPriority())&&Nj(a.Jc,b.fa());a.Yb.Eb(b);Qj(a);return b.Sb().ga}function Qj(a){for(var b=a.Yb.ta(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.L()?Rj(a,d,1,3):Rj(a,d,2,0))a.Yb.remove(d),e=a,d.exec().then(e.Eg.bind(e,d),e.Dg.bind(e,d))}}function Rj(a,b,c,d){var e=!1;Mj(a.Jc,b.aa(),b.fa(),c)&&(e=Mj(a.Jc,b.aa(),b.fa(),d));return e}
Oj.prototype.Eg=function(a,b){this.Jc.releaseLock(a.aa(),a.fa());a.Sb().resolve(b);Qj(this)};Oj.prototype.Dg=function(a,b){this.Jc.releaseLock(a.aa(),a.fa());a.Sb().reject(b);Qj(this)};function Pj(){this.Yb=[]}Pj.prototype.Eb=function(a){wf(this.Yb,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.aa()-c.aa():d})};Pj.prototype.ta=function(){return this.Yb.slice()};Pj.prototype.remove=function(a){var b=this.Yb;a=xa(b,a);var c;(c=0<=a)&&Array.prototype.splice.call(b,a,1);return c};function Sj(){this.Rc=y()}var Tj;function Uj(){Tj||(Tj=new Sj);return Tj}Sj.prototype.clear=function(){this.Rc.clear()};Sj.prototype.clear=Sj.prototype.clear;Sj.prototype.wb=function(a,b){this.Rc.set(a.toString(),b);return b};Sj.prototype.registerService=Sj.prototype.wb;Sj.prototype.f=function(a){var b=this.Rc.get(a.toString())||null;if(null===b)throw new E(7,a.toString());return b};Sj.prototype.getService=Sj.prototype.f;Sj.prototype.qd=function(a){return this.Rc.has(a.toString())};
Sj.prototype.isRegistered=Sj.prototype.qd;function Vj(){var a=Uj();return Wb(a.Rc)};function Wj(a,b,c,d){return null!=a?null!=b?Xj(a,b,c,d):Yj(a):Zj()}function ak(a){var b="";try{b=JSON.stringify(a)}catch(c){}return b}function bk(a){var b=Uj();a=new kc("ns_"+a);return b.qd(a)?b.f(a):null}function Zj(){var a={};Vj().forEach(function(b){"ns_"==b.substring(0,3)&&(b=b.substring(3),a[b]=bk(b).f(rc).version())});return ak(a)}function Yj(a){a=bk(a);var b={};if(null!=a){var c=a.f(nc);a.f(rc).ra().forEach(function(a){b[a.getName()]=c.get(af(a)).ca().ka})}return ak(b)}
function Xj(a,b,c,d){var e=bk(a);a=[];if(null!=e){var f=null;try{f=e.f(rc).table(b)}catch(h){}null!=f&&(b=e.f(nc),e=e.f(mc),c=b.get(af(f)).Wa(void 0,!1,c,d),c.length&&(a=tf(e,c).map(function(a){return a.s})))}return ak(a)};function ck(a,b){this.Td=Ud();this.ne=a;this.sd=b;this.M=dk(this)}function dk(a){if(0<a.ne.h.length)return a.ne.h;var b=[];a.ne.c.forEach(function(a){a.pb().forEach(function(a){b.push(a)})});return b}ck.prototype.$=function(a,b){return this.M.every(function(c){return Vd(this.Td,c.L(),"eq")(I(a,c),I(b,c))},this)};
function ek(a,b,c){var d=null===b?[]:b.entries,e=qb(d,c.entries,a.$.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.sd.splice(f,1),k=fk(h,k,0,a.sd),b.push(k))}e=qb(d,c.entries,a.$.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.sd.splice(h,0,k.xa.s),k=fk(h,[],1,a.sd),b.push(k));return b}function fk(a,b,c,d){return{Zg:c,index:a,object:d,ah:b,type:"splice"}};function gk(){this.jc=y()}gk.prototype.Fd=function(a,b){var c=ka(a.a).toString(),d=this.jc.get(c)||null;null===d&&(d=new hk(a),this.jc.set(c,d));d.Fd(b)};gk.prototype.oe=function(a,b){var c=ka(a.a).toString(),d=this.jc.get(c)||null;d.oe(b);0<d.Lc.size||this.jc.delete(c)};function xe(a,b){var c=C();b.forEach(function(a){c.add(a.getName())});var d=[];a.jc.forEach(function(a){a=a.Gc();a.context.c.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function ve(a,b,c){b=ka(null!=b.$c?b.$c:b).toString();a=a.jc.get(b)||null;null!==a&&ik(a,c)}function hk(a){this.Kf=a;this.Lc=C();this.Bg=[];this.df=null;this.Vf=new ck(a.a,this.Bg)}hk.prototype.Fd=function(a){this.Lc.has(a)||this.Lc.add(a)};hk.prototype.oe=function(a){return this.Lc.delete(a)};hk.prototype.Gc=function(){var a=this.Kf;return{context:a.a,le:Yh(a)}};function ik(a,b){var c=ek(a.Vf,a.df,b);a.df=b;0<c.length&&a.Lc.forEach(function(a){a(c)})};function jk(a,b){var c=a.f(rc),d=b||{},e=new sf(c);a.wb(mc,e);var e=null,f=!1;null!=d.storeType?e=d.storeType:(e=Ub(),e=e.ig?0:e.Yg?4:1);switch(e){case 0:e=new Xe(a,c);break;case 1:e=new df(c);break;case 5:e=new ff(c);break;case 4:e=new pf(a,c,d.webSqlDbSize);break;case 3:e=new Ke(c,d.firebase);f=!0;break;default:throw new E(300);}a.wb(lc,e);var h=new tg;a.wb(nc,h);return e.Ga(d.onUpgrade).then(function(){var b=new Gj(a);a.wb(oc,b);b=new Oj;a.wb(pc,b);b=new gk;a.wb(qc,b);return h.Ga(c)}).then(function(){if(f){var b=
new ze(a);b.Pa.subscribe(b.ge.bind(b))}d.enableInspector&&(window.top["#lfInspect"]=Wj);return(new mg(a)).Ga(c)})};function kk(a){this.g=a;this.i=a.f(rc);this.ba=C(this.i.ra());this.hb=fb()}function lk(a){var b=a.g.f(nc),c=a.g.f(mc),d={};a.i.ra().forEach(function(a){var f=b.get(af(a)).Wa(),f=tf(c,f).map(function(a){return a.s});d[a.getName()]=f});return{name:a.i.name(),version:a.i.version(),tables:d}}m=kk.prototype;m.exec=function(){var a=lk(this),a=new Hd(new Xb(-1,a),!0);return w([new H([a],[])])};m.L=l(0);m.fa=g("ba");m.Sb=g("hb");m.aa=function(){return ka(this)};m.getPriority=l(0);function mk(a,b){this.g=a;this.i=a.f(rc);this.ba=C(this.i.ra());this.hb=fb();this.Da=b;this.Pa=a.f(lc);this.W=a.f(mc);this.G=a.f(nc)}m=mk.prototype;
m.exec=function(){if(!(this.Pa instanceof Xe||this.Pa instanceof df||this.Pa instanceof pf))throw new E(300);var a;a:{a=this.i.ra();for(var b=0;b<a.length;++b)if(0<this.G.get(af(a[b])).ca().ka){a=!1;break a}a=!0}if(!a)throw new E(110);if(this.i.name()!=this.Da.name||this.i.version()!=this.Da.version)throw new E(111);if(null==this.Da.tables)throw new E(112);return nk(this)};m.L=l(1);m.fa=g("ba");m.Sb=g("hb");m.aa=function(){return ka(this)};m.getPriority=l(0);
function nk(a){var b=new kd(a.g,a.ba),b=a.Pa.Jb(a.L(),D(a.ba),b),c;for(c in a.Da.tables){var d=a.i.table(c),e=a.Da.tables[c].map(function(a){return d.Bb(a)}),f=b.K(c,d.ob,0);a.W.$b(c,e);var h=a.G.qc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.rb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ma()};function ok(a,b){this.g=a;this.Pa=a.f(lc);this.Ka=a.f(pc);this.Nb=a.f(qc);this.ba=C(b);this.Sa=new kd(this.g,this.ba);this.hb=fb();this.Cc=fb();this.Ce=fb()}m=ok.prototype;m.exec=function(){this.Ce.resolve();return this.Cc.ga};m.L=l(1);m.fa=g("ba");m.Sb=g("hb");m.aa=function(){return ka(this)};m.getPriority=l(2);function pk(a){ye(a.Ka,a);return a.Ce.ga}
function qk(a,b){var c=b.Gc();return c.le.eb().exec(a.Sa,c.context).then(function(a){return zd(a[0])},function(a){this.Sa.Ob();var b=new kb(a.name);this.Cc.reject(b);throw a;}.bind(a))}m.ma=function(){this.la=this.Pa.Jb(this.L(),D(this.ba),this.Sa);this.la.ma().then(function(){this.Qc();this.Cc.resolve()}.bind(this),function(a){this.Sa.Ob();this.Cc.reject(a)}.bind(this));return this.hb.ga};m.Ob=function(){this.Sa.Ob();this.Cc.resolve();return this.hb.ga};
m.Qc=function(){var a=xe(this.Nb,this.ba);0!=a.length&&(a=new ue(this.g,a),ye(this.Ka,a))};m.ca=function(){var a=null;null!=this.la&&(a=this.la.ca());return null===a?new A(!1,0,0,0,0):a};function W(a){this.g=a;this.Ka=a.f(pc);this.Pb=null;this.Ua=0;0==rk.size&&(rk.set(0,C([1,4])),rk.set(1,C([2])),rk.set(2,C([3,5,6])),rk.set(3,C([2,7])),rk.set(4,C([7])),rk.set(5,C([7])),rk.set(6,C([7])))}r("lf.proc.Transaction",W);var rk=y();function sk(a,b){var c=rk.get(a.Ua)||null;if(null===c||!c.has(b))throw new E(107,a.Ua,b);a.Ua=b}
W.prototype.exec=function(a){sk(this,4);var b=[];try{a.forEach(function(a){a.mb();b.push(a.Gc())},this)}catch(c){return sk(this,7),bb(c)}this.Pb=new Bh(this.g,b);return ye(this.Ka,this.Pb).then(function(a){sk(this,7);return a.map(function(a){return zd(a)})}.bind(this),function(a){sk(this,7);throw a;}.bind(this))};W.prototype.exec=W.prototype.exec;W.prototype.If=function(a){sk(this,1);this.Pb=new ok(this.g,a);return pk(this.Pb).then(function(){sk(this,2)}.bind(this))};W.prototype.begin=W.prototype.If;
W.prototype.Hf=function(a){sk(this,3);return qk(this.Pb,a).then(function(a){sk(this,2);return a}.bind(this),function(a){sk(this,7);throw a;}.bind(this))};W.prototype.attach=W.prototype.Hf;W.prototype.ma=function(){sk(this,5);return this.Pb.ma().then(function(){sk(this,7)}.bind(this))};W.prototype.commit=W.prototype.ma;W.prototype.Ob=function(){sk(this,6);return this.Pb.Ob().then(function(){sk(this,7)}.bind(this))};W.prototype.rollback=W.prototype.Ob;
W.prototype.ca=function(){if(7!=this.Ua)throw new E(105);return this.Pb.ca()};W.prototype.stats=W.prototype.ca;function X(a){this.g=a;this.i=a.f(rc);this.md=!1}r("lf.proc.Database",X);X.prototype.Ga=function(a){this.g.wb(rc,this.i);return jk(this.g,a).then(function(){this.md=!0;this.Ka=this.g.f(pc);return this}.bind(this))};X.prototype.init=X.prototype.Ga;X.prototype.Db=g("i");X.prototype.getSchema=X.prototype.Db;function tk(a){if(!a.md)throw new E(2);}X.prototype.select=function(a){tk(this);return new V(this.g,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
X.prototype.select=X.prototype.select;X.prototype.Eb=function(){tk(this);return new $h(this.g)};X.prototype.insert=X.prototype.Eb;X.prototype.Zd=function(){tk(this);return new $h(this.g,!0)};X.prototype.insertOrReplace=X.prototype.Zd;X.prototype.update=function(a){tk(this);return new ji(this.g,a)};X.prototype.update=X.prototype.update;X.prototype.delete=function(){tk(this);return new Zh(this.g)};X.prototype["delete"]=X.prototype.delete;
X.prototype.observe=function(a,b){tk(this);this.g.f(qc).Fd(a,b)};X.prototype.observe=X.prototype.observe;X.prototype.unobserve=function(a,b){tk(this);this.g.f(qc).oe(a,b)};X.prototype.unobserve=X.prototype.unobserve;X.prototype.Rf=function(){tk(this);return new W(this.g)};X.prototype.createTransaction=X.prototype.Rf;X.prototype.close=function(){try{this.g.f(lc).close()}catch(a){}this.g.clear();this.md=!1};X.prototype.close=X.prototype.close;
X.prototype.ag=function(){tk(this);var a=new kk(this.g);return ye(this.Ka,a).then(function(a){return zd(a[0])[0]})};X.prototype["export"]=X.prototype.ag;X.prototype.import=function(a){tk(this);a=new mk(this.g,a);return ye(this.Ka,a).then(l(null))};X.prototype["import"]=X.prototype.import;function Y(a,b,c,d,e,f){this.V=a;this.C=b;this.$e=c;this.Ye=d;this.Af=e;this.lb=f||null}r("lf.schema.BaseColumn",Y);m=Y.prototype;m.getName=g("C");m.m=function(){return Jd(this.V)+"."+this.C};m.toString=function(){return this.m()};m.K=g("V");m.L=g("Af");Y.prototype.getType=Y.prototype.L;Y.prototype.cb=g("lb");Y.prototype.Fa=function(){null==this.va&&(this.va=[],this.K().Fa().forEach(function(a){-1!=a.h.map(function(a){return a.da.getName()}).indexOf(this.C)&&this.va.push(a)},this));return this.va};
Y.prototype.Ea=function(){if(!q(this.ia)){var a=this.Fa().filter(function(a){return 1!=a.h.length?!1:a.h[0].da.getName()==this.getName()},this);this.ia=0<a.length?a[0]:null}return this.ia};Y.prototype.mc=g("Ye");Y.prototype.isNullable=Y.prototype.mc;Y.prototype.Ic=g("$e");Y.prototype.Ra=function(a){return Mg(this,a,"eq")};Y.prototype.eq=Y.prototype.Ra;Y.prototype.gf=function(a){return Mg(this,a,"neq")};Y.prototype.neq=Y.prototype.gf;Y.prototype.ug=function(a){return Mg(this,a,"lt")};
Y.prototype.lt=Y.prototype.ug;Y.prototype.vg=function(a){return Mg(this,a,"lte")};Y.prototype.lte=Y.prototype.vg;Y.prototype.dg=function(a){return Mg(this,a,"gt")};Y.prototype.gt=Y.prototype.dg;Y.prototype.eg=function(a){return Mg(this,a,"gte")};Y.prototype.gte=Y.prototype.eg;Y.prototype.match=function(a){return Mg(this,a,"match")};Y.prototype.match=Y.prototype.match;Y.prototype.Jf=function(a,b){return Mg(this,[a,b],"between")};Y.prototype.between=Y.prototype.Jf;
Y.prototype.fg=function(a){return Mg(this,a,"in")};Y.prototype["in"]=Y.prototype.fg;Y.prototype.pg=function(){return this.Ra(null)};Y.prototype.isNull=Y.prototype.pg;Y.prototype.og=function(){return this.gf(null)};Y.prototype.isNotNull=Y.prototype.og;Y.prototype.wc=function(a){return new Y(this.V,this.C,this.$e,this.Ye,this.Af,a)};Y.prototype.as=Y.prototype.wc;function uk(a){this.i=a;this.Ld=new Sc;this.pe=new Sc;this.jf=new Sc;this.Le=y();this.j=new Sc;this.He=new Sc;this.qf=new Sc;this.Ke=new Sc;vk(this)}function vk(a){a.i.ra().forEach(function(a){var c=a.getName();a.Lb().Yd().forEach(function(d){this.jf.set(c,this.i.table(d.Ya));this.j.set(d.Ya,a);0==d.action?(this.pe.set(d.Ya,d),this.qf.set(d.Ya,a)):(this.Ld.set(d.Ya,d),this.He.set(d.Ya,a));this.Le.set(a.getName()+"."+d.zb,d.Ya);this.Ke.set(d.Ya+"."+d.Nc,a.getName())},this)},a)}
function ad(a,b,c){if(null!=c)return 1==c?a.Ld.get(b):a.pe.get(b);c=a.Ld.get(b);a=a.pe.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function Hh(a,b){var c=b.get(a);return null===c?[]:c}function Jh(a,b){var c=C();b.forEach(function(a){(a=this.Le.get(a))&&c.add(a)},a);return D(c).map(function(a){return this.i.table(a)},a)}function Fh(a,b,c){return null!=c?0==c?Hh(b,a.qf):Hh(b,a.He):Hh(b,a.j)}
function Kh(a,b){var c=C();b.forEach(function(a){(a=this.Ke.get(a))&&a.forEach(function(a){c.add(a)})},a);return D(c).map(function(a){return this.i.table(a)},a)};function wk(a,b,c){this.Ig=a;this.Ag=b;this.bg=c}r("lf.schema.Constraint",wk);wk.prototype.fd=g("Ig");wk.prototype.getPrimaryKey=wk.prototype.fd;wk.prototype.Yd=g("bg");wk.prototype.getForeignKeys=wk.prototype.Yd;function xk(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new E(540,c);this.Je=b;this.zb=a.local;this.Ya=d[0];this.Nc=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Z(a){yk(a);this.Td=Ud();this.C=a;this.M=y();this.Cd=C();this.sc=C();this.rd=C();this.Ha=null;this.va=y();this.vd=!1;this.Cb=[]}r("lf.schema.TableBuilder",Z);function zk(a){this.name=a.name;this.ub=a.order;this.autoIncrement=a.autoIncrement}var Ak=C([0,6]);function yk(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new E(502,a);}function Bk(a,b){if(b==a.C)throw new E(546,b);if(a.M.has(b)||a.va.has(b)||a.sc.has(b))throw new E(503,a.C+"."+b);}
function Ck(a,b){var c=!1;b.forEach(function(a){var b=this.M.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new E(504);},a);if(c&&1<b.length)throw new E(505);}function Dk(a){if(null!==a.Ha){var b=a.va.get(a.Ha).map(function(a){return a.name}),c=0;if(a.Cb.some(function(a,e){c=e;return-1!=b.indexOf(a.zb)},a))throw new E(543,a.Cb[c].name);}}
function Ek(a){if(null!==a.Ha){var b=function(a){return a.name},c=JSON.stringify(a.va.get(a.Ha).map(b));a.va.forEach(function(a,e){if(e!=this.Ha){var f=a.map(b);if(JSON.stringify(f)==c)throw new E(544,this.C+"."+e);}},a)}}function Fk(a){null===a.Ha||a.va.get(a.Ha).forEach(function(a){if(this.rd.has(a.name))throw new E(545,this.C+"."+a.name);},a)}Z.prototype.Cf=function(a,b){yk(a);Bk(this,a);this.M.set(a,b);Ak.has(b)&&this.Ee([a]);return this};Z.prototype.addColumn=Z.prototype.Cf;
Z.prototype.Ef=function(a,b){var c=this.C;this.Ha="pk"+(c[0].toUpperCase()+c.substring(1));yk(this.Ha);Bk(this,this.Ha);c=Gk(this,a,!0,void 0,b);Ck(this,c);1==c.length&&this.Cd.add(c[0].name);this.sc.add(this.Ha);this.va.set(this.Ha,c);return this};Z.prototype.addPrimaryKey=Z.prototype.Ef;
Z.prototype.Df=function(a,b){yk(a);Bk(this,a);var c=new xk(b,this.C,a);q(c.action)||(c.action=0);q(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new E(506);if(!this.M.has(c.zb))throw new E(540,a);this.Cb.push(c);this.De(a,[c.zb],this.Cd.has(c.zb));return this};Z.prototype.addForeignKey=Z.prototype.Df;Z.prototype.Ff=function(a,b){yk(a);Bk(this,a);var c=Gk(this,b,!0);1==c.length&&(this.Cd.add(c[0].name),Hk(this,c[0].name));this.va.set(a,c);this.sc.add(a);return this};
Z.prototype.addUnique=Z.prototype.Ff;function Hk(a,b){a.Cb.forEach(function(a){a.zb==b&&this.sc.add(a.name.split(".")[1])},a)}Z.prototype.Ee=function(a){Gk(this,a,!1).forEach(function(a){this.rd.add(a.name)},this);return this};Z.prototype.addNullable=Z.prototype.Ee;Z.prototype.De=function(a,b,c,d){yk(a);Bk(this,a);b=Gk(this,b,!0,d);c&&this.sc.add(a);this.va.set(a,b);return this};Z.prototype.addIndex=Z.prototype.De;Z.prototype.Hb=ba("vd");Z.prototype.persistentIndex=Z.prototype.Hb;
Z.prototype.Db=function(){Dk(this);Ek(this);Fk(this);return new (Ik(this))};Z.prototype.getSchema=Z.prototype.Db;function Jk(a){return a.Cb}function Gk(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new zk({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new zk(a)});f.forEach(function(a){if(!this.M.has(a.name))throw new E(508,this.C,a.name);if(c){var b=this.M.get(a.name);if(0==b||6==b)throw new E(509,this.C,a.name);}},a);return f}
function Ik(a){function b(){function b(c){return a.va.get(c).map(function(a){return{da:this[a.name],ub:a.ub,autoIncrement:a.autoIncrement}},this)}var d=Wb(a.M).map(function(b){this[b]=new Y(this,b,a.Cd.has(b),a.rd.has(b),a.M.get(b));return this[b]},this),e=Wb(a.va).map(function(d){return new Og(a.C,d,a.sc.has(d),b.call(this,d))},this);R.call(this,a.C,d,e,a.vd);var f=null===a.Ha?null:new Og(a.C,a.Ha,!0,b.call(this,a.Ha)),h=d.filter(function(b){return!a.rd.has(b.getName())});this.Of=new wk(f,h,a.Cb);
this.tf=Kk(a,d,e)}t(b,R);b.prototype.Bb=function(a){return new this.tf(Yb++,a)};b.prototype.createRow=b.prototype.Bb;b.prototype.ob=function(a){var b={};this.pb().forEach(function(e){var f=e.getName();e=e.L();var h=a.value[f];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),n=0,B=0;n<e.length;n+=2)k[B++]=parseInt(e.substr(n,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[f]=e},this);return new this.tf(a.id,b)};b.prototype.deserializeRow=
b.prototype.ob;b.prototype.Lb=g("Of");b.prototype.getConstraint=b.prototype.Lb;return b}
function Kk(a,b,c){function d(a,d){this.M=b;this.va=c;Xb.call(this,a,d)}t(d,Xb);d.prototype.Ne=function(){var a={};this.M.forEach(function(b){a[b.getName()]=b.mc()?null:Rc[b.L()]});return a};d.prototype.zf=function(){var a={};this.M.forEach(function(b){var c=b.getName();b=b.L();var d=this.s[c];a[c]=0==b?null!=d?ac(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.M.get(a.getName()),c=this.Td.af.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.da)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.m();a=1==a.h.length?e(a.h[0].da):f(a.h);h[b]=a});d.prototype.rb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.s):null};return d};function Lk(a,b){this.i=new Mk(a,b);this.yb=y();this.Dc=!1;this.l=null}r("lf.schema.Builder",Lk);function Nk(a,b){b.Cb.forEach(function(a){var d=a.Ya;if(!this.yb.has(d))throw new E(536,a.name);var d=this.yb.get(d).Db(),e=a.Nc;if(!d.hasOwnProperty(e))throw new E(537,a.name);if(b.Db()[a.zb].L()!=d[e].L())throw new E(538,a.name);if(!d[e].Ic())throw new E(539,a.name);},a)}
Lk.prototype.Nf=function(a){a.Cb.forEach(function(a){Jk(this.yb.get(a.Ya)).forEach(function(c){if(c.zb==a.Nc)throw new E(534,a.name);},this)},this)};function Ok(a){a.Dc||(a.yb.forEach(function(a){Nk(this,a);a=a.Db();this.i.O.set(a.getName(),a)},a),z(a.yb).forEach(a.Nf,a),Pk(a),a.yb.clear(),a.Dc=!0)}function Qk(a,b,c){b.Be||(b.Be=!0,b.he=!0,b.Oe.forEach(function(a){a=c.get(a);if(!a.Be)Qk(this,a,c);else if(a.he&&b!=a)throw new E(533);},a));b.he=!1}
function Pk(a){var b=y();a.i.O.forEach(function(a,d){b.set(d,new Rk(d))},a);a.yb.forEach(function(a,d){a.Cb.forEach(function(a){b.get(a.Ya).Oe.add(d)})});z(b).forEach(function(a){Qk(this,a,b)},a)}function Rk(a){this.he=this.Be=!1;this.Oe=C();this.rc=a}Lk.prototype.Db=function(){this.Dc||Ok(this);return this.i};Lk.prototype.getSchema=Lk.prototype.Db;Lk.prototype.Se=function(){var a=new kc("ns_"+this.i.name()),b=Uj(),c=null;b.qd(a)?c=b.f(a):(c=new Sj,b.wb(a,c));return c};Lk.prototype.getGlobal=Lk.prototype.Se;
Lk.prototype.connect=function(a){if(null!==this.l&&this.l.md)throw new E(113);if(null===this.l){var b=this.Se();b.qd(rc)||b.wb(rc,this.Db());this.l=new X(b)}return this.l.Ga(a)};Lk.prototype.connect=Lk.prototype.connect;Lk.prototype.Qf=function(a){if(this.yb.has(a))throw new E(503,a);if(this.Dc)throw new E(535);this.yb.set(a,new Z(a));return this.yb.get(a)};Lk.prototype.createTable=Lk.prototype.Qf;Lk.prototype.ue=function(a){if(this.Dc)throw new E(535);this.i.ue(a);return this};
Lk.prototype.setPragma=Lk.prototype.ue;function Mk(a,b){this.C=a;this.Va=b;this.O=y();this.nf={Wf:!1}}r("lf.schema.DatabaseSchema",Mk);Mk.prototype.name=g("C");Mk.prototype.name=Mk.prototype.name;Mk.prototype.version=g("Va");Mk.prototype.version=Mk.prototype.version;Mk.prototype.ra=function(){return z(this.O)};Mk.prototype.tables=Mk.prototype.ra;Mk.prototype.table=function(a){if(!this.O.has(a))throw new E(101,a);return this.O.get(a)};Mk.prototype.table=Mk.prototype.table;
Mk.prototype.info=function(){this.Xe||(this.Xe=new uk(this));return this.Xe};Mk.prototype.mf=g("nf");Mk.prototype.pragma=Mk.prototype.mf;Mk.prototype.ue=ba("nf");r("lf.schema.create",function(a,b){return new Lk(a,b)});v.prototype.catch=v.prototype.xe;v.prototype["catch"]=v.prototype.catch;
try{if(module){module.exports=lf;}}catch(e){}}.bind(window))()


},{}]},{},[2]);
